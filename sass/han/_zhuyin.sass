

/* 
 * Ruby: 國語注音、台灣方言音符號
 * ---
 * Ruby: Mandarin & Taiwanese Dialect
 * Phonetic Symbols (Zhuyin)
 *
 */

span.han-js-zhuyin-rendered
	display: inline

	span.yin
		// posi
		display: inline-block
		opacity: 0
		text-indent: -9999999em

		// size
		width: 0


	&[data-zhuyin-font=sans-serif] span.zi[data-yin]:after 
		font-family: 'Zhuyin Heiti', sans-serif

	&[data-zhuyin-font=serif] span.zi[data-yin]:after 
		font-family: 'Zhuyin Kaiti', cursive, serif

	span.zi
		&[data-yin]
			// posi
			display: inline-block
			margin-right: .1em
			position: relative
			text-indent: 0

			// size
			height: 2em


			&:after,
			&[data-diao]:before
				// posi
				display: inline-block
				text-indent: 0
				vertical-align: middle

				// typo & reset
				@include zhuozhonghao(none)
				font: 300 normal 1em/.9 'Zhuyin Kaiti', cursive, serif
				text-decoration: none


			&:after
				// posi
				margin-left: -.2em

				// size
				@include scale(.55)
				height: 2.7em
				width: .8em

				// typo
				content: attr(data-yin)
				line-height: .9
				white-space: pre-wrap
				word-break: break-all


			// 預設（黑體）注音符號的注音、調號位置調整
			// 單個注音字符
			&[data-form="shengmu"]:after,
			&[data-form="jieyin"]:after,
			&[data-form="yunmu"]:after
				margin-top: .65em

			// 二個注音字符
			&[data-form="shengmu-jieyin"]:after,
			&[data-form="shengmu-yunmu"]:after,
			&[data-form="jieyin-yunmu"]:after
				margin-top: .15em

			// 三個注音字符
			&[data-form="shengmu-jieyin-yunmu"]:after
				margin-top: -.4em

			// 調號
			&[data-diao="0"]:before
				content: '˙'

			&[data-diao="2"]:before
				content: 'ˊ'

			&[data-diao="3"]:before
				content: 'ˇ'

			&[data-diao="4"]:before
				content: 'ˋ'

			&[data-diao]:before
				// posi
				position: absolute
				vertical-align: middle

				// size
				@include scale(.55)
				-webkit-transform: scale(.65)
				height: 2.7em
				width: 1em


			&[data-diao="0"]:before,
			&[data-diao="2"]:before,
			&[data-diao="3"]:before,
			&[data-diao="4"]:before
				margin-right: -.6em
				right: 0

			&[data-diao="0"]:before
				margin-right: -.35em
				margin-top: 0

			// 依注音字符數量為調號定位
			&[data-form="shengmu"][data-diao]:not([data-diao="0"]):before,
			&[data-form="jieyin"][data-diao]:not([data-diao="0"]):before,
			&[data-form="yunmu"][data-diao]:not([data-diao="0"]):before
				margdin-top: .45em
				padding-top: .35em

			&[data-form="shengmu-jieyin"][data-diao]:not([data-diao="0"]):before,
			&[data-form="shengmu-yunmu"][data-diao]:not([data-diao="0"]):before,
			&[data-form="jieyin-yunmu"][data-diao]:not([data-diao="0"]):before
				margin-top: .45em

			&[data-form="shengmu-jieyin-yunmu"][data-diao]:not([data-diao="0"]):before
				margin-top: .35em

			&[data-form="shengmu"][data-diao][data-diao="0"]:before,
			&[data-form="jieyin"][data-diao][data-diao="0"]:before,
			&[data-form="yunmu"][data-diao][data-diao="0"]:before
				margin-top: .45em

			&[data-form="shengmu-jieyin-yunmu"][data-diao="0"]:before
				margin-top: -.6em


	// 楷體注音符號的注音、調號位置調整
	&[data-zhuyin-font=serif] span.zi[data-yin]
		// 單個注音字符
		&[data-form="shengmu"]:after,
		&[data-form="jieyin"]:after,
		&[data-form="yunmu"]:after
			margin-top: .65em

		// 二個注音字符
		&[data-form="shengmu-jieyin"]:after,
		&[data-form="shengmu-yunmu"]:after,
		&[data-form="jieyin-yunmu"]:after
			margin-top: .35em

		// 三個注音字符
		&[data-form="shengmu-jieyin-yunmu"]:after
			margin-top: -.25em

		// 調號
		&[data-diao="0"]:before,
		&[data-diao="2"]:before,
		&[data-diao="3"]:before,
		&[data-diao="4"]:before
			margin-right: -.6em
			right: 0

		&[data-diao="0"]:before
			margin-right: -.275em
			margin-top: .35em

		&[data-diao="2"]:before
			margin-right:  -.5em

		// 依注音字符數量為調號定位
		&[data-form="shengmu"][data-diao]:not([data-diao="0"]):before,
		&[data-form="jieyin"][data-diao]:not([data-diao="0"]):before,
		&[data-form="yunmu"][data-diao]:not([data-diao="0"]):before
			margdin-top: .45em
			padding-top: .35em

		&[data-form="shengmu-jieyin"][data-diao]:not([data-diao="0"]):before,
		&[data-form="shengmu-yunmu"][data-diao]:not([data-diao="0"]):before,
		&[data-form="jieyin-yunmu"][data-diao]:not([data-diao="0"]):before
			margin-top: .65em

		&[data-form="shengmu-jieyin-yunmu"][data-diao]:not([data-diao="0"]):before
			margin-top: .55em

		&[data-form="shengmu"][data-diao][data-diao="0"]:before,
		&[data-form="jieyin"][data-diao][data-diao="0"]:before,
		&[data-form="yunmu"][data-diao][data-diao="0"]:before
			margin-top: .6em

		&[data-form="shengmu-jieyin-yunmu"][data-diao="0"]:before
			margin-top: -.2em


	// 若在實驗性底線中
	u.han-js-charized
		border-bottom: 1px solid
		padding-bottom: .125em

		span.char span
			border-bottom: 0 none !important

		& + u 
			margin-left: .125em
















