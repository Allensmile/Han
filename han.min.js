/*!
 * 漢字標準格式 v3.0.0 | MIT License | css.hanzi.co
 * Han: CSS typography framework optimised for Hanzi
 */
!function(a,b){"function"==typeof define&&define.amd?define("Han",[],function(){return b}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}(this,function(a,b){var c=document.documentElement,d=document.body,e="3.0.0-alpha1",f=function(a,b){return new f.fn.init(a,b)};f.fn=f.prototype={version:e,constructor:f,context:d,condition:c,routine:["initCond","renderElem","renderHWS","renderBasicBd"],init:function(a,b){return a&&(this.context=a),b&&(this.condition=b),this},setOption:function(a){return this},renderByRoutine:function(){for(var a=this.routine,b=0,c=a.length;c>b;b++)try{this[a[b]]()}catch(d){}return this}},f.fn.init.prototype=f.fn;var g={punct:{base:"[\u2026,.;:!?\u203d_]",sing:"[\u2010-\u2014\u2026]",middle:"[\\/~\\-&\u2010-\u2014]",open:"['\"\u2018\u201c\\(\\[\xa1\xbf\u2e18\xab\u2039\u201a\u201c\u201e]",close:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f]",end:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f,.;:!?\u203d_]"},biaodian:{base:"[\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]",liga:"[\u2014\u2026\u22ef]",middle:"[\xb7\u30fb\uff3c\uff0f\uff0d]",open:"[\u300c\u300e\u300a\u3008\uff08\u3014\uff3b\uff5b\u3010\u3016]",close:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017]",end:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]"},latin:{base:"[A-Za-z0-9\xc0-\xff\u0100-\u017f\u0180-\u024f\u1e00-\u1eff]",combine:"[\u0300-\u0341]"},ellinika:{base:"[0-9\u0370-\u03ff\u1f00-\u1fff]",combine:"[\u0300-\u0345]"},kirillica:{base:"[0-9\u0400-\u0482\u048a-\u04ff\u0500-\u052f\ua640-\ua66e\ua67e-\ua697]",combine:"[\u0483-\u0489\u2de0-\u2dff\ua66f-\ua67d\ua69f]"},hanzi:{base:"[\u4e00-\u9fff\u3400-\u4db5\u31c0-\u31e3\u3007\ufa0e\ufa0f\ufa11\ufa13\ufa14\ufa1f\ufa21\ufa23\ufa24\ufa27-\ufa29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf]|\ud86d[\udc00-\udf3f]|[\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udf00-\udfff]|\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f]",desc:"[\u2ff0-\u2ffa]",radical:"[\u2f00-\u2fd5\u2e80-\u2ef3]"},kana:{base:"[\u30a2\u30a4\u30a6\u30a8\u30aa-\u30fa\u3042\u3044\u3046\u3048\u304a-\u3094\u309f\u30ff]",combine:"[\u3099-\u309c]",small:"[\u3041\u3043\u3045\u3047\u3049\u30a1\u30a3\u30a5\u30a7\u30a9\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u31f0-\u31ff]",mark:"[\u30a0\u309d\u309e\u30fb-\u30fe]"},zhuyin:{base:"[\u3105-\u312d\u31a0-\u31ba]",initial:"[\u3105-\u3119\u312a-\u312c\u31a0-\u31a3]",medial:"[\u3127-\u3129]","final":"[\u311a-\u3126\u312d\u31a4-\u31b3\u31b8-\u31ba]",tone:"[\u02d9\u02ca\u02c5\u02c7\u02cb\u02ea\u02eb]",ruyun:"[\u31b4-\u31b7][\u0358\u030d]?"}},h="[\\x20\\t\\r\\n\\f]",i=g.punct.open,j=g.punct.close,k=g.punct.end,l=g.punct.middle,m=i+"|"+k+"|"+l,n=g.biaodian.open,o=g.biaodian.end,p=g.biaodian.middle,q=g.biaodian.liga+"{2}",r=n+"|"+o+"|"+p,s=g.kana.base+g.kana.combine+"?",t=g.kana.small+g.kana.combine+"?",u=g.hanzi.base+"|"+g.hanzi.desc+"|"+g.hanzi.radical+"|"+s,v=g.ellinika.combine,w=g.latin.base+v+"*",x=g.ellinika.base+v+"*",y=g.kirillica.combine,z=g.kirillica.base+y+"*",A=w+"|"+x+"|"+z,B=u+"|("+A+")+",C={"char":{biaodian:{all:new RegExp("("+r+")","g"),open:new RegExp("("+n+")","g"),end:new RegExp("("+o+")","g"),liga:new RegExp("("+q+")","g")},hanzi:{individual:new RegExp("("+u+")","g"),kana:new RegExp("("+s+")","g"),smallkana:new RegExp("("+t+")","g"),group:new RegExp("("+u+")+","g")},punct:{all:new RegExp("("+m+")","g")},alphabet:{latin:new RegExp(w,"ig"),ellinika:new RegExp(x,"ig"),kirillica:new RegExp(z,"ig")},word:new RegExp("("+w+"|"+x+"|"+z+"|"+m+")+","ig")},jinze:{touwei:new RegExp("("+n+"+)("+B+")("+o+"+)","ig"),tou:new RegExp("("+n+"+)("+B+")","ig"),wei:new RegExp("("+B+")("+o+"+)","ig"),middle:new RegExp("("+B+")("+p+")("+B+")","ig")},hws:{base:[new RegExp("("+u+")("+A+"|"+i+")","ig"),new RegExp("("+A+"|"+k+")("+u+")","ig")],strict:[new RegExp("("+u+")"+h+"?("+A+"|"+i+")","ig"),new RegExp("("+A+"|"+k+")"+h+"?("+u+")","ig")]}},D={id:function(a,b){return(b||document).getElementById(a)},tag:function(a,b){return this.makeArray((b||document).getElementsByTagName(a))},qsa:function(a,b){return this.makeArray((b||document).querySelectorAll(a))},create:function(a,b){var a="!"===a?document.createDocumentFragment():document.createElement(a);try{b&&(a.className=b)}catch(c){}return a},clone:function(a,b){return a.cloneNode(b||!0)},remove:function(a){return a.parentNode.removeChild(a)},setAttr:function(a,b){var c=b.length;if("object"==typeof b){if("object"==typeof b[0]&&"name"in b[0])for(var d=0;c>d;d++)void 0!==b[d].value&&a.setAttribute(b[d].name,b[d].value);else for(var e in b)b.hasOwnProperty(e)&&void 0!==b[e]&&a.setAttribute(e,b[e]);return a}},makeArray:function(a){return Array.prototype.slice.call(a)},extend:function(a,b){var c="object"==typeof a||"function"==typeof a;if(c&&"object"==typeof b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}}},E=function(){var a="retain",b="first",c=document,d={}.toString;function e(a){return"[object Array]"==d.call(a)}function f(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(){return h.apply(null,arguments)||i.apply(null,arguments)}function h(a,b,c,d,e){if(b&&!b.nodeType&&arguments.length<=2)return!1;var f="function"==typeof c;f&&(c=function(a){return function(b,c){return a(b.text,c.startIndex)}}(c));var h=i(b,{find:a,wrap:f?null:c,replace:f?c:"$"+(d||"&"),prepMatch:function(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(d>0){var c=a[d];a.index+=a[0].indexOf(c),a[0]=c}return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},filterElements:e});return g.revert=function(){return h.revert()},!0}function i(a,b){return new j(a,b)}g.Finder=j;function j(b,c){c.portionMode=c.portionMode||a,this.node=b,this.options=c,this.prepMatch=c.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return j.prototype={search:function(){var a,b=0,c=this.options.find,d=this.getAggregateText(),e=[];if(c="string"==typeof c?RegExp(f(c),"g"):c,c.global)while(a=c.exec(d))e.push(this.prepMatch(a,b++));else(a=d.match(c))&&e.push(this.prepMatch(a,0));return e},prepMatch:function(a,b){if(!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},getAggregateText:function(){var a=this.options.filterElements;return b(this.node);function b(c){if(3===c.nodeType)return c.data;if(a&&!a(c))return"";var d="";if(c=c.firstChild)do d+=b(c);while(c=c.nextSibling);return d}},processMatches:function(){var a=this.matches,b=this.node,c=this.options.filterElements,d,e,f=[],g=b,h=a.shift(),i=0,j=0,k=0,l,m=[b];a:while(!0){if(3===g.nodeType&&(!e&&g.length+i>=h.endIndex?e={node:g,index:k++,text:g.data.substring(h.startIndex-i,h.endIndex-i),indexInMatch:i-h.startIndex,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,isEnd:!0}:d&&f.push({node:g,index:k++,text:g.data,indexInMatch:i-h.startIndex,indexInNode:0}),!d&&g.length+i>h.startIndex&&(d={node:g,index:k++,indexInMatch:0,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,text:g.data.substring(h.startIndex-i,h.endIndex-i)}),i+=g.data.length),l=1===g.nodeType&&c&&!c(g),d&&e){if(g=this.replaceMatch(h,d,f,e),i-=e.node.data.length-e.endIndexInNode,d=null,e=null,f=[],h=a.shift(),k=0,j++,!h)break}else if(!l&&(g.firstChild||g.nextSibling)){g.firstChild?(m.push(g),g=g.firstChild):g=g.nextSibling;continue}while(!0){if(g.nextSibling){g=g.nextSibling;break}if(g=m.pop(),g===b)break a}}},revert:function(){for(var a=this.reverts.length;a--;)this.reverts[a]();this.reverts=[]},prepareReplacementString:function(a,c,d,e){var f=this.options.portionMode;return f===b&&c.indexInMatch>0?"":(a=a.replace(/\$(\d+|&|`|')/g,function(a,b){var c;switch(b){case"&":c=d[0];break;case"`":c=d.input.substring(0,d.startIndex);break;case"'":c=d.input.substring(d.endIndex);break;default:c=d[+b]}return c}),f===b?a:c.isEnd?a.substring(c.indexInMatch):a.substring(c.indexInMatch,c.indexInMatch+c.text.length))},getPortionReplacementNode:function(a,b,d){var e=this.options.replace||"$&",f=this.options.wrap;if(f&&f.nodeType){var g=c.createElement("div");g.innerHTML=f.outerHTML||(new XMLSerializer).serializeToString(f),f=g.firstChild}if("function"==typeof e)return e=e(a,b,d),e&&e.nodeType?e:c.createTextNode(String(e));var h="string"==typeof f?c.createElement(f):f;return e=c.createTextNode(this.prepareReplacementString(e,a,b,d)),e.data&&h?(h.appendChild(e),h):e},replaceMatch:function(a,b,d,e){var f=b.node,g=e.node,h,i;if(f===g){var j=f;b.indexInNode>0&&(h=c.createTextNode(j.data.substring(0,b.indexInNode)),j.parentNode.insertBefore(h,j));var k=this.getPortionReplacementNode(e,a);return j.parentNode.insertBefore(k,j),e.endIndexInNode<j.length&&(i=c.createTextNode(j.data.substring(e.endIndexInNode)),j.parentNode.insertBefore(i,j)),j.parentNode.removeChild(j),this.reverts.push(function(){h===k.previousSibling&&h.parentNode.removeChild(h),i===k.nextSibling&&i.parentNode.removeChild(i),k.parentNode.replaceChild(j,k)}),k}h=c.createTextNode(f.data.substring(0,b.indexInNode)),i=c.createTextNode(g.data.substring(e.endIndexInNode));for(var l=this.getPortionReplacementNode(b,a),m=[],n=0,o=d.length;o>n;++n){var p=d[n],q=this.getPortionReplacementNode(p,a);p.node.parentNode.replaceChild(q,p.node),this.reverts.push(function(a,b){return function(){b.parentNode.replaceChild(a.node,b)}}(p,q)),m.push(q)}var r=this.getPortionReplacementNode(e,a);return f.parentNode.insertBefore(h,f),f.parentNode.insertBefore(l,f),f.parentNode.removeChild(f),g.parentNode.insertBefore(r,g),g.parentNode.insertBefore(i,g),g.parentNode.removeChild(g),this.reverts.push(function(){h.parentNode.removeChild(h),l.parentNode.replaceChild(f,l),i.parentNode.removeChild(i),r.parentNode.replaceChild(g,r)}),r}},g}(),F=function(a,b,c,d,e){return new F.prototype.init(a,b,c,d,e)};F.prototype={constructor:F,selector:"",finder:[],init:function(a,b,c,d,e){return this.selector=a,"string"==typeof b?this.filteredElemList=b:"function"==typeof b&&(this.filterElem=b),"string"==typeof c&&this[c]?this[c](d,e):this},filteredElemList:"style script",filterElem:function(a){var a=a.nodeName.toLowerCase(),b=this.filteredElemList.split(" "),c=!0;return b.forEach(function(b){return a===b?void(c=!1):void 0}),c},replace:function(a,b){var c=this;return this.finder.push(E(this.selector,{find:a,replace:b,filterElements:function(a){return c.filterElem(a)}})),this},wrap:function(a,b){var c=this;return c.finder.push(E(c.selector,{find:a,wrap:b,filterElements:function(a){return c.filterElem(a)}})),this},revert:function(a){var b=this.finder.length,a=Number(a)||0===a?Number(a):"all"===a?b:1;if("undefined"==typeof b||0===b)return this;a>this.finder.length&&(a=b);for(var c=parseInt(a);c>0;c--)this.finder.pop().revert();return this},jinzify:function(){var a=this.filteredElemList;return this.filteredElemList+=" jinze",this.replace(C.jinze.touwei,function(a,b){var c=b[0],d=document.createTextNode(c),e=D.create("jinze","touwei");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(C.jinze.wei,function(a,b){var c=b[0],d=document.createTextNode(c),e=D.create("jinze","wei");return e.appendChild(d),0===a.index?e:""}).replace(C.jinze.tou,function(a,b){var c=b[0],d=document.createTextNode(c),e=D.create("jinze","tou");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(C.jinze.middle,function(a,b){var c=b[0],d=document.createTextNode(c),e=D.create("jinze","middle");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}),this.filteredElemList=a,this},charify:function(a){var a=D.extend({hanzi:"individual",liga:"liga",word:"group",latin:"group",ellinika:"group",kirillica:"group"},a||{});return"group"===a.hanzi&&this.wrap(C.char.hanzi.group,D.clone(D.create("char_group","hanzi cjk"))),"individual"===a.hanzi&&this.wrap(C.char.hanzi.individual,D.clone(D.create("char","hanzi cjk"))),("individual"===a.hanzi||"biaodian"===a.hanzi||"liga"===a.liga)&&("none"!==a.hanzi&&this.replace(C.char.biaodian.all,function(a,b){var c=b[0],d=document.createTextNode(c),e="biaodian cjk "+(c.match(C.char.biaodian.open)?"open":c.match(C.char.biaodian.end)?"end":""),f=D.create("char",e),g=c.charCodeAt(0).toString(16);return f.setAttribute("unicode",g),f.appendChild(d),f}),this.replace("liga"===a.liga?C.char.biaodian.liga:new RegExp("("+g.biaodian.liga+")","g"),function(a,b){var c=b[0],d=document.createTextNode(c),e=D.create("char","biaodian liga cjk"),f=c.charCodeAt(0).toString(16);return e.setAttribute("unicode",f),e.appendChild(d),e})),"none"!==a.word&&this.wrap(C.char.word,D.clone(D.create("word"))),("none"!==a.latin||"none"!==a.ellinika||"none"!==a.kirillica)&&this.wrap(C.char.punct.all,D.clone(D.create("char","punct"))),"individual"===a.latin&&this.wrap(C.char.alphabet.latin,D.clone(D.create("char","alphabet latin"))),"individual"===a.ellinika&&this.wrap(C.char.alphabet.ellinika,D.clone(D.create("char","alphabet ellinika greek"))),"individual"===a.kirillica&&this.wrap(C.char.alphabet.kirillica,D.clone(D.create("char","alphabet kirillica cyrillic"))),this}},F.prototype.init.prototype=F.prototype;var G={};function H(a,b){var c=D.create("canvas"),e;return c.width="50",c.height="20",c.style.display="none",d.appendChild(c),e=c.getContext("2d"),e.textBaseline="top",e.font="15px "+b+", sans-serif",e.fillStyle="black",e.strokeStyle="black",e.fillText(a,0,0),[c,e]}function I(a,b,c){var a=a,b=b,c=c||"\u8fadQ",d;try{b=H(c,b||"sans-serif"),a=H(c,a);for(var e=1;20>=e;e++)for(var f=1;50>=f;f++){if("undefined"!==d&&a[1].getImageData(f,e,1,1).data[3]!==b[1].getImageData(f,e,1,1).data[3]){d=!0;break}if(d)break;50!==f||20!==e||d||(d=!1)}return b[0].parentNode.removeChild(b[0]),a[0].parentNode.removeChild(a[0]),b=null,a=null,d}catch(g){return!1}}var J="Webkit Moz ms".split(" "),K={},L=D.create("_");function M(a){var b=a.charAt(0).toUpperCase()+a.slice(1),c=(a+" "+J.join(b+" ")+b).split(" "),d;return c.forEach(function(a){"string"==typeof L.style[a]&&(d=!0)}),d||!1}function N(a,b){var e=d||D.create("body"),f=D.create("div"),g=d?f:e,b="function"==typeof b?b:function(){},h,i,j;return h=["<style>",a,"</style>"].join(""),g.innerHTML+=h,e.appendChild(f),d||(e.style.background="",e.style.overflow="hidden",j=c.style.overflow,c.style.overflow="hidden",c.appendChild(e)),i=b(g,a),g.parentNode.removeChild(g),d||(c.style.overflow=j),!!i}function O(b,c){var d;return a.getComputedStyle?d=document.defaultView.getComputedStyle(b,null).getPropertyValue(c):b.currentStyle&&(d=b.currentStyle[c]),d}K={ruby:function(){var a=D.create("ruby"),b=D.create("rt"),d=D.create("rp"),e;return a.appendChild(d),a.appendChild(b),c.appendChild(a),e="none"===O(d,"display")||"ruby"===O(a,"display")&&"ruby-text"===O(b,"display")?!0:!1,c.removeChild(a),a=null,b=null,d=null,e}(),fontface:function(){var a;return N('@font-face { font-family: font; src: url("http://"); }',function(b,c){var d=D.qsa("style",b)[0],e=d.sheet||d.styleSheet,f=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"";a=/src/i.test(f)&&0===f.indexOf(c.split(" ")[0])}),a}(),unicoderange:function(){var a;return N('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',function(){a=!I("test-for-unicode-range",'Arial, "Droid Sans"',"Q")}),a}(),columnwidth:function(){return M("columnWidth")}(),textemphasis:function(){return M("textEmphasis")}(),writingmode:function(){return M("writingMode")}()};var P=g.zhuyin.initial,Q=g.zhuyin.medial,R=g.zhuyin.final,S=g.zhuyin.tone+"|"+g.zhuyin.ruyun,T=new RegExp("^("+P+")?("+Q+")?("+R+")?("+S+")?$"),U=new RegExp("("+S+")","ig");function V(a,b){var a=D.clone(a),b=D.clone(b),c=D.create("rb");return c.appendChild(a),c.appendChild(b),D.setAttr(c,{annotation:b.textContent}),c}function W(a,b){var a=D.clone(a),c=D.create("rb"),d=D.create("zhuyin"),e=D.create("yin"),f=D.create("diao"),g=b.textContent,h,i,j,k;return h=g.replace(U,""),k=h?h.length:0,i=g.replace(h,"").replace(/[\u02C5]/g,"\u02c7").replace(/[\u030D]/g,"\u0358"),j=g.replace(T,function(a,b,c){return[a?"S":null,b?"J":null,c?"Y":null].join("")}),f.innerHTML=i,e.innerHTML=h,d.appendChild(e),d.appendChild(f),"RB"===a.nodeName?c.innerHTML=a.innerHTML:c.appendChild(a),c.appendChild(d),D.setAttr(c,{zhuyin:"",diao:i,length:k,form:j}),c}D.extend(G,{renderElem:function(a){this.renderRuby(a),this.renderLine(a),this.renderLine(a,"s, del"),this.renderEm(a)},renderLine:function(a,b){var b=b||"u, ins",c=D.qsa(b,a),d=new RegExp("^("+b.replace(/\,\s?/g,"|")+")$","ig");c.forEach(function(a){var b;do if(b=(b||a).nextSibling,!b)return;while("WBR"===b.nodeName||8===b.nodeType);b.nodeName.match(d)&&b.classList.add("adjacent")})},renderEm:function(a,b){var c=b?"qsa":"tag",b=b||"em",d=D[c](b,a);d.forEach(function(a){var b=F(a);K.textemphasis||b.jinzify(),b.charify(K.textemphasis?{hanzi:"biaodian",word:"punctuation"}:{latin:"individual",ellinika:"individual",kirillica:"individual"})})},renderRuby:function(a,b){var c=b?"qsa":"tag",b=b||"ruby",d=D[c](b,a),e=b+", rtc",f=D.qsa(e,a);f.forEach(function(a){var b=a.classList;b.contains("pinyin")?b.add("romanization"):b.contains("mps")&&b.add("zhuyin"),b.contains("romanization")&&b.add("annotation")}),d.forEach(function(a){var c=a.classList,d=!K.ruby||c.contains("zhuyin")||c.contains("complex")||c.contains("rightangle"),e,f,g,h;d&&(e=D.create("!"),e.appendChild(D.clone(a)),f=D.qsa(b,e)[0],(!K.ruby||c.contains("zhuyin"))&&D.tag("rt",f).forEach(function(a){var b=D.create("!"),d=[],e;do{if(e=(e||a).previousSibling,!e||e.nodeName.match(/(rt|rb)/i))break;b.insertBefore(D.clone(e),b.firstChild),d.push(e)}while(!e.nodeName.match(/(rt|rb)/i));b=c.contains("zhuyin")?W(b,a):V(b,a);try{a.parentNode.replaceChild(b,a),d.forEach(function(a){D.remove(a)})}catch(f){}}),(c.contains("complex")||c.contains("rightangle"))&&(g=D.tag("rb",f),!function(b){b&&(D.tag("rt",b).forEach(function(a,b){var c=W(g[b],a);try{g[b].parentNode.replaceChild(c,g[b])}catch(d){}}),D.remove(b),a.setAttribute("rightangle",""))}(f.querySelector("rtc.zhuyin")),D.qsa("rtc:not(.zhuyin)",f).forEach(function(a,b){var c=a.classList,d,e;d=e=0,g=D.qsa(0===b?"rb":"rb[span]",f),D.tag("rt",a).forEach(function(a){var f=D.create("!"),h=parseInt(a.getAttribute("rbspan"))||1,i,j;if(d=e,e+=parseInt(h),b>0)for(var k=e-1;k>=d;k--)if(g[k]&&(i=parseInt(g[k].getAttribute("span"))||1,i>h)){j=D.tag("rb",g[k]);for(var l=0,m=j.length;m>l;l++)g.splice(k+l,1,j[l])}for(var k=e-1;k>=d;k--)g[k]&&(f.insertBefore(D.clone(g[k]),f.firstChild),h>1&&k!==d?D.remove(g[k]):(f=V(f,a),D.setAttr(f,{"class":c,span:h,order:b}),g[k].parentNode.replaceChild(f,g[k])))}),D.remove(a)})),h=D.create("hruby"),h.innerHTML=e.firstChild.innerHTML,D.setAttr(h,a.attributes),h.normalize(),a.parentNode.replaceChild(h,a))})}});function X(a){var a=a||c,b="",d;a.classList.add("hyu-js-rendered");for(var e in K)d=(K[e]?"":"no-")+e,a.classList.add(d),b+=d+" ";return b}D.extend(G,{support:K,detectFont:I,initCond:X});var Y={};Y.support={heiti:!0,songti:function(){return G.detectFont("Han Songti")}(),kaiti:function(){return G.detectFont("Han Kaiti")}(),fangsong:function(){return G.detectFont("Han Fangsong")}()};var Z="* > hws:first-child, * > wbr:first-child + hws, wbr:first-child + wbr + hws",$=function(){var a=D.create("div");return a.appendChild(document.createTextNode("0-")),a.appendChild(document.createTextNode("2")),a.normalize(),2!==a.firstChild.length}();function _(a,b){var a=a||document,c=b?"strict":"base",d,e;return d=D.create("hws"),d.innerHTML=" ",e=F(a),e.filteredElemList+=" textarea",e.replace(C.hws[c][0],"$1<hws/>$2").replace(C.hws[c][1],"$1<hws/>$2").replace(/(['"]+)[<hws\/>|\s]*(.+?)[<hws\/>|\s]*(['"]+)/gi,"$1$2$3").replace("<hws/>",function(){return D.clone(d)}),D.qsa(Z,a).forEach(function(a){var b=a.parentNode,c=b.firstChild;while("WBR"===c.nodeName||8===c.nodeType)if(c=c.nextSibling,!c)return;while("HWS"===c.nodeName)if(b.removeChild(c),c=b.parentNode.insertBefore(D.clone(d),b),b=b.parentNode,$&&b.normalize(),c!==b.firstChild)break}),$&&a.normalize(),e}function ab(a){var a=a||document,b,c;K.unicoderange||(b=F(a),b.filteredElemList+=" em",c=D.create("char","biaodian cjk middle"),c.setAttribute("unicode","b7"),b.wrap(/\u00B7/g,D.clone(c)).charify({liga:"liga",hanzi:"none",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))}return D.extend(f,{renderHWS:_,renderBasicBd:ab}),D.extend(f,{UNICODE:g,TYPESET:C}),D.extend(f.UNICODE,{greek:f.UNICODE.ellinika,cyrillic:f.UNICODE.kirillica}),Object.freeze(f.UNICODE),Object.freeze(f.TYPESET),f.init=function(){return f().renderByRoutine()},f.Farr=F,["replace","wrap","revert","jinzify","charify"].forEach(function(a){f.fn[a]=function(){return this.Farr||(this.Farr=f.Farr(this.context)),this.Farr[a](arguments[0],arguments[1]),this}}),f.normalize=G,f.support=G.support,f.detectFont=G.detectFont,D.extend(f.fn,{initCond:function(){return this.condition.classList.add("han-js-rendered"),f.normalize.initCond(this.condition),this}}),["Elem","Line","Em","Ruby"].forEach(function(a){var b="render"+a;f.fn[b]=function(a){return f.normalize[b](this.context,a),this}}),f.typeface=Y,D.extend(f.support,Y.support),["HWS","BasicBd"].forEach(function(a){var b="render"+a;f.fn[b]=function(){return D.makeArray(arguments).unshift(this.context),f[b].apply(null,arguments),this}}),!function(){var a,b;a=setInterval(function(){"complete"===document.readyState&&(clearTimeout(a),c.classList.contains("han-init")?f.init():(b=document.querySelector(".han-init-context"))&&f(b).renderByRoutine())},50)}(),("undefined"==typeof b||b===!1&&"function"!=typeof define&&!define.amd)&&(a.Han=f),f});