/*!
 * 漢字標準格式 v3.0.0 | MIT License | css.hanzi.co
 * Han: CSS typography framework optimised for Hanzi
 */
!function(a,b){"function"==typeof define&&define.amd?define("Han",[],function(){return b}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}(this,function(a,b){var c=a.document,d=c.documentElement,e=c.body,f="3.0.0",g=["initCond","renderElem","renderHWS","renderBasicBD"],h=function(a,b){return new h.fn.init(a,b)};h.fn=h.prototype={version:f,constructor:h,context:e,condition:d,routine:g,init:function(a,b){return a&&(this.context=a),b&&(this.condition=b),this},setRoutine:function(a){return Array.isArray(a)?(this.routine=a,this):void 0},renderByRoutine:function(){var a=this;return this.routine.forEach(function(b){if("string"==typeof b)try{a[b]()}catch(c){}else if(Array.isArray(b))try{a[b.shift()].apply(a,b)}catch(c){}}),this}},h.fn.init.prototype=h.fn,h.init=function(){return h.init=h().renderByRoutine()};var i={punct:{base:"[\u2026,.;:!?\u203d_]",sing:"[\u2010-\u2014\u2026]",middle:"[\\/~\\-&\u2010-\u2014]",open:"['\"\u2018\u201c\\(\\[\xa1\xbf\u2e18\xab\u2039\u201a\u201c\u201e]",close:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f]",end:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f,.;:!?\u203d_]"},biaodian:{base:"[\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]",liga:"[\u2014\u2026\u22ef]",middle:"[\xb7\u30fb\uff3c\uff0f\uff0d]",open:"[\u300c\u300e\u300a\u3008\uff08\u3014\uff3b\uff5b\u3010\u3016]",close:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017]",end:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]"},latin:{base:"[A-Za-z0-9\xc0-\xff\u0100-\u017f\u0180-\u024f\u1e00-\u1eff]",combine:"[\u0300-\u0341]"},ellinika:{base:"[0-9\u0370-\u03ff\u1f00-\u1fff]",combine:"[\u0300-\u0345]"},kirillica:{base:"[0-9\u0400-\u0482\u048a-\u04ff\u0500-\u052f\ua640-\ua66e\ua67e-\ua697]",combine:"[\u0483-\u0489\u2de0-\u2dff\ua66f-\ua67d\ua69f]"},hanzi:{base:"[\u4e00-\u9fff\u3400-\u4db5\u31c0-\u31e3\u3007\ufa0e\ufa0f\ufa11\ufa13\ufa14\ufa1f\ufa21\ufa23\ufa24\ufa27-\ufa29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf]|\ud86d[\udc00-\udf3f]|[\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udf00-\udfff]|\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f]",desc:"[\u2ff0-\u2ffa]",radical:"[\u2f00-\u2fd5\u2e80-\u2ef3]"},kana:{base:"[\u30a2\u30a4\u30a6\u30a8\u30aa-\u30fa\u3042\u3044\u3046\u3048\u304a-\u3094\u309f\u30ff]",combine:"[\u3099-\u309c]",small:"[\u3041\u3043\u3045\u3047\u3049\u30a1\u30a3\u30a5\u30a7\u30a9\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u31f0-\u31ff]",mark:"[\u30a0\u309d\u309e\u30fb-\u30fe]"},eonmun:{base:"[\uac00-\ud7a3]",letter:"[\u1100-\u11ff\u314f-\u3163\u3131-\u318e]",half:"[\uffa1-\uffdc]"},zhuyin:{base:"[\u3105-\u312d\u31a0-\u31ba]",initial:"[\u3105-\u3119\u312a-\u312c\u31a0-\u31a3]",medial:"[\u3127-\u3129]","final":"[\u311a-\u3126\u312d\u31a4-\u31b3\u31b8-\u31ba]",tone:"[\u02d9\u02ca\u02c5\u02c7\u02cb\u02ea\u02eb]",ruyun:"[\u31b4-\u31b7][\u0358\u030d]?"}},j=function(){var a="[\\x20\\t\\r\\n\\f]",b=i.punct.open,c=i.punct.close,d=i.punct.end,e=i.punct.middle,f=b+"|"+d+"|"+e,g=i.biaodian.open,h=i.biaodian.end,j=i.biaodian.middle,k=i.biaodian.liga+"{2}",l=g+"|"+h+"|"+j,m=i.kana.base+i.kana.combine+"?",n=i.kana.small+i.kana.combine+"?",o=i.hanzi.base+"|"+i.hanzi.desc+"|"+i.hanzi.radical+"|"+m,p=i.ellinika.combine,q=i.latin.base+p+"*",r=i.ellinika.base+p+"*",s=i.kirillica.combine,t=i.kirillica.base+s+"*",u=q+"|"+r+"|"+t,v="['\u2019]",w=o+"|("+u+"|"+v+")+",x=i.zhuyin.initial,y=i.zhuyin.medial,z=i.zhuyin.final,A=i.zhuyin.tone+"|"+i.zhuyin.ruyun;return{"char":{biaodian:{all:new RegExp("("+l+")","g"),open:new RegExp("("+g+")","g"),end:new RegExp("("+h+")","g"),liga:new RegExp("("+k+")","g")},hanzi:{individual:new RegExp("("+o+")","g"),kana:new RegExp("("+m+")","g"),smallkana:new RegExp("("+n+")","g"),group:new RegExp("("+o+")+","g")},punct:{all:new RegExp("("+f+")","g")},alphabet:{latin:new RegExp(q,"ig"),ellinika:new RegExp(r,"ig"),kirillica:new RegExp(t,"ig")},word:new RegExp("("+q+"|"+r+"|"+t+"|"+f+")+","ig")},jinze:{touwei:new RegExp("("+g+"+)("+w+")("+h+"+)","ig"),tou:new RegExp("("+g+"+)("+w+")","ig"),wei:new RegExp("("+w+")("+h+"+)","ig"),middle:new RegExp("("+w+")("+j+")("+w+")","ig")},zhuyin:{form:new RegExp("^("+x+")?("+y+")?("+z+")?("+A+")?$"),diao:new RegExp("("+A+")","g")},hws:{base:[new RegExp("("+o+")("+u+"|"+b+")","ig"),new RegExp("("+u+"|"+d+")("+o+")","ig")],strict:[new RegExp("("+o+")"+a+"?("+u+"|"+b+")","ig"),new RegExp("("+u+"|"+d+")"+a+"?("+o+")","ig")]},"display-as":{"ja-font-for-hant":["\u67e5 \u67fb","\u555f \u5553","\u9109 \u9115","\u503c \u5024","\u6c61 \u6c5a"],pua:{"checked-tone-vowel":["a[\u030d\u0358] \uf0061","e[\u030d\u0358] \uf0065","i[\u030d\u0358] \uf0069","o[\u030d\u0358] \uf006F","u[\u030d\u0358] \uf0075"],"checked-tone-zhuyin":["\u31b4[\u030d\u0358] \uf31b4","\u31b5[\u030d\u0358] \uf31b5","\u31b6[\u030d\u0358] \uf31b6","\u31b7[\u030d\u0358] \uf31b7"]}},"convert-to":{mark:["\u2022 \xb7","\u22ef\u22ef \u2026\u2026","\u2500\u2500 \u2014\u2014"]}}}();h.UNICODE=i,h.TYPESET=j,h.UNICODE.greek=h.UNICODE.ellinika,h.UNICODE.cyrillic=h.UNICODE.kirillica,h.UNICODE.cjk=h.UNICODE.hanzi,h.UNICODE.hangul=h.UNICODE.eonmun,Object.freeze(h.UNICODE),Object.freeze(h.TYPESET);var k={id:function(a,b){return(b||c).getElementById(a)},tag:function(a,b){return this.makeArray((b||c).getElementsByTagName(a))},qsa:function(a,b){return this.makeArray((b||c).querySelectorAll(a))},create:function(a,b){var a="!"===a?c.createDocumentFragment():""===a?c.createTextNode(b):c.createElement(a);try{b&&(a.className=b)}catch(d){}return a},clone:function(a,b){return a.cloneNode(b||!0)},remove:function(a){return a.parentNode.removeChild(a)},setAttr:function(a,b){var c=b.length;if("object"==typeof b){if("object"==typeof b[0]&&"name"in b[0])for(var d=0;c>d;d++)void 0!==b[d].value&&a.setAttribute(b[d].name,b[d].value);else for(var e in b)b.hasOwnProperty(e)&&void 0!==b[e]&&a.setAttribute(e,b[e]);return a}},makeArray:function(a){return Array.prototype.slice.call(a)},extend:function(a,b){var c="object"==typeof a||"function"==typeof a;if(c&&"object"==typeof b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}}},l=function(){var a="retain",b="first",d=c,e={}.toString;function f(a){return"[object Array]"==e.call(a)}function g(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(){return i.apply(null,arguments)||j.apply(null,arguments)}function i(a,b,c,d,e){if(b&&!b.nodeType&&arguments.length<=2)return!1;var f="function"==typeof c;f&&(c=function(a){return function(b,c){return a(b.text,c.startIndex)}}(c));var g=j(b,{find:a,wrap:f?null:c,replace:f?c:"$"+(d||"&"),prepMatch:function(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(d>0){var c=a[d];a.index+=a[0].indexOf(c),a[0]=c}return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},filterElements:e});return h.revert=function(){return g.revert()},!0}function j(a,b){return new k(a,b)}h.Finder=k;function k(b,c){c.portionMode=c.portionMode||a,this.node=b,this.options=c,this.prepMatch=c.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return k.prototype={search:function(){var a,b=0,c=this.options.find,d=this.getAggregateText(),e=[];if(c="string"==typeof c?RegExp(g(c),"g"):c,c.global)while(a=c.exec(d))e.push(this.prepMatch(a,b++));else(a=d.match(c))&&e.push(this.prepMatch(a,0));return e},prepMatch:function(a,b){if(!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},getAggregateText:function(){var a=this.options.filterElements;return b(this.node);function b(c){if(3===c.nodeType)return c.data;if(a&&!a(c))return"";var d="";if(c=c.firstChild)do d+=b(c);while(c=c.nextSibling);return d}},processMatches:function(){var a=this.matches,b=this.node,c=this.options.filterElements,d,e,f=[],g=b,h=a.shift(),i=0,j=0,k=0,l,m=[b];a:while(!0){if(3===g.nodeType&&(!e&&g.length+i>=h.endIndex?e={node:g,index:k++,text:g.data.substring(h.startIndex-i,h.endIndex-i),indexInMatch:i-h.startIndex,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,isEnd:!0}:d&&f.push({node:g,index:k++,text:g.data,indexInMatch:i-h.startIndex,indexInNode:0}),!d&&g.length+i>h.startIndex&&(d={node:g,index:k++,indexInMatch:0,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,text:g.data.substring(h.startIndex-i,h.endIndex-i)}),i+=g.data.length),l=1===g.nodeType&&c&&!c(g),d&&e){if(g=this.replaceMatch(h,d,f,e),i-=e.node.data.length-e.endIndexInNode,d=null,e=null,f=[],h=a.shift(),k=0,j++,!h)break}else if(!l&&(g.firstChild||g.nextSibling)){g.firstChild?(m.push(g),g=g.firstChild):g=g.nextSibling;continue}while(!0){if(g.nextSibling){g=g.nextSibling;break}if(g=m.pop(),g===b)break a}}},revert:function(){for(var a=this.reverts.length;a--;)this.reverts[a]();this.reverts=[]},prepareReplacementString:function(a,c,d,e){var f=this.options.portionMode;return f===b&&c.indexInMatch>0?"":(a=a.replace(/\$(\d+|&|`|')/g,function(a,b){var c;switch(b){case"&":c=d[0];break;case"`":c=d.input.substring(0,d.startIndex);break;case"'":c=d.input.substring(d.endIndex);break;default:c=d[+b]}return c}),f===b?a:c.isEnd?a.substring(c.indexInMatch):a.substring(c.indexInMatch,c.indexInMatch+c.text.length))},getPortionReplacementNode:function(a,b,c){var e=this.options.replace||"$&",f=this.options.wrap;if(f&&f.nodeType){var g=d.createElement("div");g.innerHTML=f.outerHTML||(new XMLSerializer).serializeToString(f),f=g.firstChild}if("function"==typeof e)return e=e(a,b,c),e&&e.nodeType?e:d.createTextNode(String(e));var h="string"==typeof f?d.createElement(f):f;return e=d.createTextNode(this.prepareReplacementString(e,a,b,c)),e.data&&h?(h.appendChild(e),h):e},replaceMatch:function(a,b,c,e){var f=b.node,g=e.node,h,i;if(f===g){var j=f;b.indexInNode>0&&(h=d.createTextNode(j.data.substring(0,b.indexInNode)),j.parentNode.insertBefore(h,j));var k=this.getPortionReplacementNode(e,a);return j.parentNode.insertBefore(k,j),e.endIndexInNode<j.length&&(i=d.createTextNode(j.data.substring(e.endIndexInNode)),j.parentNode.insertBefore(i,j)),j.parentNode.removeChild(j),this.reverts.push(function(){h===k.previousSibling&&h.parentNode.removeChild(h),i===k.nextSibling&&i.parentNode.removeChild(i),k.parentNode.replaceChild(j,k)}),k}h=d.createTextNode(f.data.substring(0,b.indexInNode)),i=d.createTextNode(g.data.substring(e.endIndexInNode));for(var l=this.getPortionReplacementNode(b,a),m=[],n=0,o=c.length;o>n;++n){var p=c[n],q=this.getPortionReplacementNode(p,a);p.node.parentNode.replaceChild(q,p.node),this.reverts.push(function(a,b){return function(){b.parentNode.replaceChild(a.node,b)}}(p,q)),m.push(q)}var r=this.getPortionReplacementNode(e,a);return f.parentNode.insertBefore(h,f),f.parentNode.insertBefore(l,f),f.parentNode.removeChild(f),g.parentNode.insertBefore(r,g),g.parentNode.insertBefore(i,g),g.parentNode.removeChild(g),this.reverts.push(function(){h.parentNode.removeChild(h),l.parentNode.replaceChild(f,l),i.parentNode.removeChild(i),r.parentNode.replaceChild(g,r)}),r}},h}(),m=function(a,b,c,d,e){return new m.prototype.init(a,b,c,d,e)};m.prototype={constructor:m,selector:"",finder:[],init:function(a,b,c,d,e){return this.selector=a,"string"==typeof b?this.filteredElemList=b:"function"==typeof b&&(this.filterElem=b),"string"==typeof c&&this[c]?this[c](d,e):this},filteredElemList:"style script",filterElem:function(a){var a=a.nodeName.toLowerCase(),b=this.filteredElemList.split(" "),c=!0;return b.forEach(function(b){return a===b?void(c=!1):void 0}),c},replace:function(a,b){var c=this;return this.finder.push(l(this.selector,{find:a,replace:b,filterElements:function(a){return c.filterElem(a)}})),this},wrap:function(a,b){var c=this;return c.finder.push(l(c.selector,{find:a,wrap:b,filterElements:function(a){return c.filterElem(a)}})),this},revert:function(a){var b=this.finder.length,a=Number(a)||0===a?Number(a):"all"===a?b:1;if("undefined"==typeof b||0===b)return this;a>this.finder.length&&(a=b);for(var c=parseInt(a);c>0;c--)this.finder.pop().revert();return this},jinzify:function(){var a=this.filteredElemList;return this.filteredElemList+=" jinze",this.replace(j.jinze.touwei,function(a,b){var c=b[0],d=k.create("",c),e=k.create("jinze","touwei");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(j.jinze.wei,function(a,b){var c=b[0],d=k.create("",c),e=k.create("jinze","wei");return e.appendChild(d),0===a.index?e:""}).replace(j.jinze.tou,function(a,b){var c=b[0],d=k.create("",c),e=k.create("jinze","tou");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}).replace(j.jinze.middle,function(a,b){var c=b[0],d=k.create("",c),e=k.create("jinze","middle");return e.appendChild(d),0===a.index&&a.isEnd||1===a.index?e:""}),this.filteredElemList=a,this},charify:function(a){var a=k.extend({hanzi:"individual",liga:"liga",word:"group",latin:"group",ellinika:"group",kirillica:"group"},a||{});return"group"===a.hanzi&&this.wrap(j.char.hanzi.group,k.clone(k.create("char_group","hanzi cjk"))),"individual"===a.hanzi&&this.wrap(j.char.hanzi.individual,k.clone(k.create("char","hanzi cjk"))),("individual"===a.hanzi||"biaodian"===a.hanzi||"liga"===a.liga)&&("none"!==a.hanzi&&this.replace(j.char.biaodian.all,function(a,b){var c=b[0],d=k.create("",c),e="biaodian cjk "+(c.match(j.char.biaodian.open)?"open":c.match(j.char.biaodian.end)?"end":""),f=k.create("char",e),g=c.charCodeAt(0).toString(16);return f.setAttribute("unicode",g),f.appendChild(d),f}),this.replace("liga"===a.liga?j.char.biaodian.liga:new RegExp("("+i.biaodian.liga+")","g"),function(a,b){var c=b[0],d=k.create("",c),e=k.create("char","biaodian liga cjk"),f=c.charCodeAt(0).toString(16);return e.setAttribute("unicode",f),e.appendChild(d),e})),"none"!==a.word&&this.wrap(j.char.word,k.clone(k.create("word"))),("none"!==a.latin||"none"!==a.ellinika||"none"!==a.kirillica)&&this.wrap(j.char.punct.all,k.clone(k.create("char","punct"))),"individual"===a.latin&&this.wrap(j.char.alphabet.latin,k.clone(k.create("char","alphabet latin"))),"individual"===a.ellinika&&this.wrap(j.char.alphabet.ellinika,k.clone(k.create("char","alphabet ellinika greek"))),"individual"===a.kirillica&&this.wrap(j.char.alphabet.kirillica,k.clone(k.create("char","alphabet kirillica cyrillic"))),this}},m.prototype.init.prototype=m.prototype,h.find=m,["replace","wrap","revert","jinzify","charify"].forEach(function(a){h.fn[a]=function(){return this.finder||(this.finder=h.find(this.context)),h.find[a].apply(this,arguments),this}});var n={JS_RENDERED_CLASS:"hyu-js-rendered"};function o(a,b){var c=k.create("canvas"),d;return c.width="50",c.height="20",c.style.display="none",e.appendChild(c),d=c.getContext("2d"),d.textBaseline="top",d.font="15px "+b+", sans-serif",d.fillStyle="black",d.strokeStyle="black",d.fillText(a,0,0),[c,d]}function p(a,b,c){var a=a,b=b,c=c||"\u8fadQ",d;try{b=o(c,b||"sans-serif"),a=o(c,a);for(var e=1;20>=e;e++)for(var f=1;50>=f;f++){if("undefined"!==d&&a[1].getImageData(f,e,1,1).data[3]!==b[1].getImageData(f,e,1,1).data[3]){d=!0;break}if(d)break;50!==f||20!==e||d||(d=!1)}return b[0].parentNode.removeChild(b[0]),a[0].parentNode.removeChild(a[0]),b=null,a=null,d}catch(g){return!1}}n.detectFont=p,n.support=function(){var b="Webkit Moz ms".split(" "),f=k.create("_"),g={};function h(a){var c=a.charAt(0).toUpperCase()+a.slice(1),d=(a+" "+b.join(c+" ")+c).split(" "),e;return d.forEach(function(a){"string"==typeof f.style[a]&&(e=!0)}),e||!1}function i(a,b){var c=e||k.create("body"),f=k.create("div"),g=e?f:c,b="function"==typeof b?b:function(){},h,i,j;return h=["<style>",a,"</style>"].join(""),g.innerHTML+=h,c.appendChild(f),e||(c.style.background="",c.style.overflow="hidden",j=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),i=b(g,a),g.parentNode.removeChild(g),e||(d.style.overflow=j),!!i}function j(b,d){var e;return a.getComputedStyle?e=c.defaultView.getComputedStyle(b,null).getPropertyValue(d):b.currentStyle&&(e=b.currentStyle[d]),e}return{ruby:function(){var a=k.create("ruby"),b=k.create("rt"),c=k.create("rp"),e;return a.appendChild(c),a.appendChild(b),d.appendChild(a),e="none"===j(c,"display")||"ruby"===j(a,"display")&&"ruby-text"===j(b,"display")?!0:!1,d.removeChild(a),a=null,b=null,c=null,e}(),fontface:function(){var a;return i('@font-face { font-family: font; src: url("http://"); }',function(b,c){var d=k.qsa("style",b)[0],e=d.sheet||d.styleSheet,f=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"";a=/src/i.test(f)&&0===f.indexOf(c.split(" ")[0])}),a}(),unicoderange:function(){var a;return i('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',function(){a=!n.detectFont("test-for-unicode-range",'Arial, "Droid Sans"',"Q")}),a}(),columnwidth:h("columnWidth"),textemphasis:h("textEmphasis"),writingmode:h("writingMode")}}(),n.initCond=function(a){var a=a||d,b="",c;a.classList.add(n.JS_RENDERED_CLASS);for(var e in n.support)c=(n.support[e]?"":"no-")+e,a.classList.add(c),b+=c+" ";return b};function q(a,b){var a=k.clone(a),b=k.clone(b),c=k.create("rb");return c.appendChild(a),c.appendChild(b),c.setAttribute("annotation",b.textContent),c}function r(a,b){var a=k.clone(a),c=k.create("rb"),d=k.create("zhuyin"),e=k.create("yin"),f=k.create("diao"),g=b.textContent,h,i,l,m;return h=g.replace(j.zhuyin.diao,""),m=h?h.length:0,i=g.replace(h,"").replace(/[\u02C5]/g,"\u02c7").replace(/[\u030D]/g,"\u0358"),l=g.replace(j.zhuyin.form,function(a,b,c){return[a?"S":null,b?"J":null,c?"Y":null].join("")}),f.innerHTML=i,e.innerHTML=h,d.appendChild(e),d.appendChild(f),"RB"===a.nodeName?c.innerHTML=a.innerHTML:c.appendChild(a),c.appendChild(d),k.setAttr(c,{zhuyin:"",diao:i,length:m,form:l}),c}k.extend(n,{renderElem:function(a){this.renderRuby(a),this.renderLineDeco(a),this.renderLineDeco(a,"s, del"),this.renderEm(a)},renderLineDeco:function(a,b){var b=b||"u, ins",c=k.qsa(b,a),d=new RegExp("^("+b.replace(/\,\s?/g,"|")+")$","ig");c.forEach(function(a){var b;do if(b=(b||a).nextSibling,!b)return;while("WBR"===b.nodeName||8===b.nodeType);b.nodeName.match(d)&&b.classList.add("adjacent")})},renderEm:function(a,b){var c=b?"qsa":"tag",b=b||"em",d=k[c](b,a);d.forEach(function(a){var b=m(a);n.support.textemphasis||b.jinzify(),b.charify(n.support.textemphasis?{hanzi:"biaodian",word:"punctuation"}:{latin:"individual",ellinika:"individual",kirillica:"individual"})})},renderRuby:function(a,b){var c=b?"qsa":"tag",b=b||"ruby",d=k[c](b,a),e=b+", rtc",f=k.qsa(e,a);f.forEach(function(a){var b=a.classList;b.contains("pinyin")?b.add("romanization"):b.contains("mps")&&b.add("zhuyin"),b.contains("romanization")&&b.add("annotation")}),d.forEach(function(a){var c=a.classList,d=!n.support.ruby||c.contains("zhuyin")||c.contains("complex")||c.contains("rightangle"),e,f,g,h;d&&(e=k.create("!"),e.appendChild(k.clone(a)),f=k.qsa(b,e)[0],(!n.support.ruby||c.contains("zhuyin"))&&k.tag("rt",f).forEach(function(a){var b=k.create("!"),d=[],e;do{if(e=(e||a).previousSibling,!e||e.nodeName.match(/(rt|rb)/i))break;b.insertBefore(k.clone(e),b.firstChild),d.push(e)}while(!e.nodeName.match(/(rt|rb)/i));b=c.contains("zhuyin")?r(b,a):q(b,a);try{a.parentNode.replaceChild(b,a),d.forEach(function(a){k.remove(a)})}catch(f){}}),(c.contains("complex")||c.contains("rightangle"))&&(g=k.tag("rb",f),!function(b){b&&(k.tag("rt",b).forEach(function(a,b){var c=r(g[b],a);try{g[b].parentNode.replaceChild(c,g[b])}catch(d){}}),k.remove(b),a.setAttribute("rightangle",""))}(f.querySelector("rtc.zhuyin")),k.qsa("rtc:not(.zhuyin)",f).forEach(function(a,b){var c=a.classList,d,e;d=e=0,g=k.qsa(0===b?"rb":"rb[span]",f),k.tag("rt",a).forEach(function(a){var f=k.create("!"),h=parseInt(a.getAttribute("rbspan"))||1,i,j;if(d=e,e+=parseInt(h),b>0)for(var l=e-1;l>=d;l--)if(g[l]&&(i=parseInt(g[l].getAttribute("span"))||1,i>h)){j=k.tag("rb",g[l]);for(var m=0,n=j.length;n>m;m++)g.splice(l+m,1,j[m])}for(var l=e-1;l>=d;l--)g[l]&&(f.insertBefore(k.clone(g[l]),f.firstChild),h>1&&l!==d?k.remove(g[l]):(f=q(f,a),k.setAttr(f,{"class":c,span:h,order:b}),g[l].parentNode.replaceChild(f,g[l])))}),k.remove(a)})),h=k.create("hruby"),h.innerHTML=e.firstChild.innerHTML,k.setAttr(h,a.attributes),h.normalize(),a.parentNode.replaceChild(h,a))})}}),h.normalize=n,h.support=n.support,h.detectFont=n.detectFont,h.fn.initCond=function(){return this.condition.classList.add("han-js-rendered"),h.normalize.initCond(this.condition),this},["Elem","LineDeco","Em","Ruby"].forEach(function(a){var b="render"+a;h.fn[b]=function(a){return h.normalize[b](this.context,a),this}}),k.extend(h.support,{heiti:!0,songti:h.detectFont('"Han Songti"'),"songti-gb":h.detectFont('"Han Songti GB"'),kaiti:h.detectFont('"Han Kaiti"'),fangsong:h.detectFont('"Han Fangsong"')});var s="* > hws:first-child, * > wbr:first-child + hws, wbr:first-child + wbr + hws",t=function(){var a=k.create("div");return a.appendChild(k.create("","0-")),a.appendChild(k.create("","2")),a.normalize(),2!==a.firstChild.length}(),u;u=k.create("hws"),u.innerHTML=" ",k.extend(h,{isNodeNormalizeNormal:t,renderHWS:function(a,b){var a=a||c,d=b?"strict":"base",e=h.find(a);return e.filteredElemList+=b?" textarea code kbd samp pre":" textarea",e.replace(h.TYPESET.hws[d][0],"$1<hws/>$2").replace(h.TYPESET.hws[d][1],"$1<hws/>$2").replace(/(['"]+)[<hws\/>|\s]*(.+?)[<hws\/>|\s]*(['"]+)/gi,"$1$2$3").replace("<hws/>",function(){return k.clone(u)}),k.qsa(s,a).forEach(function(a){var b=a.parentNode,c=b.firstChild;while("WBR"===c.nodeName||8===c.nodeType)if(c=c.nextSibling,!c)return;while("HWS"===c.nodeName)if(b.removeChild(c),c=b.parentNode.insertBefore(k.clone(u),b),b=b.parentNode,t&&b.normalize(),c!==b.firstChild)break}),t&&a.normalize(),e}}),k.extend(h.fn,{HWS:null,renderHWS:function(a){return this.HWS=h.renderHWS(this.context,a),this},revertHWS:function(){try{this.HWS.revert()}catch(a){}return this}});var v;return v=k.create("char","biaodian cjk middle"),v.setAttribute("unicode","b7"),h.renderBasicBD=function(a,b){var a=a||c,d;(b||!support.unicoderange)&&(d=h.find(a),d.filteredElemList+=" em",d.wrap(/\u00B7/g,k.clone(v)).charify({liga:"liga",hanzi:"none",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))},k.extend(h.fn,{basicBD:null,renderBasicBD:function(a){return this.basicBD=h.renderBasicBD(this.context,a),this},revertBasicBD:function(){try{this.basicBD.revert("all")}catch(a){}return this}}),!function(){var a,b;a=setInterval(function(){"complete"===c.readyState&&(clearTimeout(a),d.classList.contains("han-init")?h.init():(b=c.querySelector(".han-init-context"))&&(h.init=h(b).renderByRoutine()))},10)}(),("undefined"==typeof b||b===!1&&"function"!=typeof define&&!define.amd)&&(a.Han=h),h});