/*!
 * 漢字標準格式 v3.0.0 | MIT License | css.hanzi.co
 * Han: CSS typography framework optimised for Hanzi
 */
!function(a,b){"function"==typeof define&&define.amd?define("Han",[],function(){return b}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}(this,function(a,b){var c=a.document,d=c.documentElement,e=c.body,f="3.0.0",g=function(a,b){return new g.fn.init(a,b)};g.fn=g.prototype={version:f,constructor:g,context:e,condition:d,routine:["initCond","renderElem","renderHWS","renderBasicBd"],init:function(a,b){return a&&(this.context=a),b&&(this.condition=b),this},setOption:function(a){return this},renderByRoutine:function(){for(var a=this.routine,b=0,c=a.length;c>b;b++)try{this[a[b]]()}catch(d){}return this}},g.fn.init.prototype=g.fn;var h={punct:{base:"[\u2026,.;:!?\u203d_]",sing:"[\u2010-\u2014\u2026]",middle:"[\\/~\\-&\u2010-\u2014]",open:"['\"\u2018\u201c\\(\\[\xa1\xbf\u2e18\xab\u2039\u201a\u201c\u201e]",close:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f]",end:"['\"\u201d\u2019\\)\\]\xbb\u203a\u201b\u201d\u201f,.;:!?\u203d_]"},biaodian:{base:"[\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]",liga:"[\u2014\u2026\u22ef]",middle:"[\xb7\u30fb\uff3c\uff0f\uff0d]",open:"[\u300c\u300e\u300a\u3008\uff08\u3014\uff3b\uff5b\u3010\u3016]",close:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017]",end:"[\u300d\u300f\u300b\u3009\uff09\u3015\uff3d\uff5d\u3011\u3017\ufe30\uff0e\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u30fc]"},latin:{base:"[A-Za-z0-9\xc0-\xff\u0100-\u017f\u0180-\u024f\u1e00-\u1eff]",combine:"[\u0300-\u0341]"},ellinika:{base:"[0-9\u0370-\u03ff\u1f00-\u1fff]",combine:"[\u0300-\u0345]"},kirillica:{base:"[0-9\u0400-\u0482\u048a-\u04ff\u0500-\u052f\ua640-\ua66e\ua67e-\ua697]",combine:"[\u0483-\u0489\u2de0-\u2dff\ua66f-\ua67d\ua69f]"},hanzi:{base:"[\u4e00-\u9fff\u3400-\u4db5\u31c0-\u31e3\u3007\ufa0e\ufa0f\ufa11\ufa13\ufa14\ufa1f\ufa21\ufa23\ufa24\ufa27-\ufa29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf]|\ud86d[\udc00-\udf3f]|[\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udf00-\udfff]|\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f]",desc:"[\u2ff0-\u2ffa]",radical:"[\u2f00-\u2fd5\u2e80-\u2ef3]"},kana:{base:"[\u30a2\u30a4\u30a6\u30a8\u30aa-\u30fa\u3042\u3044\u3046\u3048\u304a-\u3094\u309f\u30ff]",combine:"[\u3099-\u309c]",small:"[\u3041\u3043\u3045\u3047\u3049\u30a1\u30a3\u30a5\u30a7\u30a9\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u31f0-\u31ff]",mark:"[\u30a0\u309d\u309e\u30fb-\u30fe]"},zhuyin:{base:"[\u3105-\u312d\u31a0-\u31ba]",initial:"[\u3105-\u3119\u312a-\u312c\u31a0-\u31a3]",medial:"[\u3127-\u3129]","final":"[\u311a-\u3126\u312d\u31a4-\u31b3\u31b8-\u31ba]",tone:"[\u02d9\u02ca\u02c5\u02c7\u02cb\u02ea\u02eb]",ruyun:"[\u31b4-\u31b7][\u0358\u030d]?"}},i="[\\x20\\t\\r\\n\\f]",j=h.punct.open,k=h.punct.close,l=h.punct.end,m=h.punct.middle,n=j+"|"+l+"|"+m,o=h.biaodian.open,p=h.biaodian.end,q=h.biaodian.middle,r=h.biaodian.liga+"{2}",s=o+"|"+p+"|"+q,t=h.kana.base+h.kana.combine+"?",u=h.kana.small+h.kana.combine+"?",v=h.hanzi.base+"|"+h.hanzi.desc+"|"+h.hanzi.radical+"|"+t,w=h.ellinika.combine,x=h.latin.base+w+"*",y=h.ellinika.base+w+"*",z=h.kirillica.combine,A=h.kirillica.base+z+"*",B=x+"|"+y+"|"+A,C=v+"|("+B+")+",D={"char":{biaodian:{all:new RegExp("("+s+")","g"),open:new RegExp("("+o+")","g"),end:new RegExp("("+p+")","g"),liga:new RegExp("("+r+")","g")},hanzi:{individual:new RegExp("("+v+")","g"),kana:new RegExp("("+t+")","g"),smallkana:new RegExp("("+u+")","g"),group:new RegExp("("+v+")+","g")},punct:{all:new RegExp("("+n+")","g")},alphabet:{latin:new RegExp(x,"ig"),ellinika:new RegExp(y,"ig"),kirillica:new RegExp(A,"ig")},word:new RegExp("("+x+"|"+y+"|"+A+"|"+n+")+","ig")},jinze:{touwei:new RegExp("("+o+"+)("+C+")("+p+"+)","ig"),tou:new RegExp("("+o+"+)("+C+")","ig"),wei:new RegExp("("+C+")("+p+"+)","ig"),middle:new RegExp("("+C+")("+q+")("+C+")","ig")},hws:{base:[new RegExp("("+v+")("+B+"|"+j+")","ig"),new RegExp("("+B+"|"+l+")("+v+")","ig")],strict:[new RegExp("("+v+")"+i+"?("+B+"|"+j+")","ig"),new RegExp("("+B+"|"+l+")"+i+"?("+v+")","ig")]}},E={id:function(a,b){return(b||c).getElementById(a)},tag:function(a,b){return this.makeArray((b||c).getElementsByTagName(a))},qsa:function(a,b){return this.makeArray((b||c).querySelectorAll(a))},create:function(a,b){var a="!"===a?c.createDocumentFragment():c.createElement(a);try{b&&(a.className=b)}catch(d){}return a},clone:function(a,b){return a.cloneNode(b||!0)},remove:function(a){return a.parentNode.removeChild(a)},setAttr:function(a,b){var c=b.length;if("object"==typeof b){if("object"==typeof b[0]&&"name"in b[0])for(var d=0;c>d;d++)void 0!==b[d].value&&a.setAttribute(b[d].name,b[d].value);else for(var e in b)b.hasOwnProperty(e)&&void 0!==b[e]&&a.setAttribute(e,b[e]);return a}},makeArray:function(a){return Array.prototype.slice.call(a)},extend:function(a,b){var c="object"==typeof a||"function"==typeof a;if(c&&"object"==typeof b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}}},F=function(){var a="retain",b="first",d=c,e={}.toString;function f(a){return"[object Array]"==e.call(a)}function g(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(){return i.apply(null,arguments)||j.apply(null,arguments)}function i(a,b,c,d,e){if(b&&!b.nodeType&&arguments.length<=2)return!1;var f="function"==typeof c;f&&(c=function(a){return function(b,c){return a(b.text,c.startIndex)}}(c));var g=j(b,{find:a,wrap:f?null:c,replace:f?c:"$"+(d||"&"),prepMatch:function(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(d>0){var c=a[d];a.index+=a[0].indexOf(c),a[0]=c}return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},filterElements:e});return h.revert=function(){return g.revert()},!0}function j(a,b){return new k(a,b)}h.Finder=k;function k(b,c){c.portionMode=c.portionMode||a,this.node=b,this.options=c,this.prepMatch=c.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return k.prototype={search:function(){var a,b=0,c=this.options.find,d=this.getAggregateText(),e=[];if(c="string"==typeof c?RegExp(g(c),"g"):c,c.global)while(a=c.exec(d))e.push(this.prepMatch(a,b++));else(a=d.match(c))&&e.push(this.prepMatch(a,0));return e},prepMatch:function(a,b){if(!a[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return a.endIndex=a.index+a[0].length,a.startIndex=a.index,a.index=b,a},getAggregateText:function(){var a=this.options.filterElements;return b(this.node);function b(c){if(3===c.nodeType)return c.data;if(a&&!a(c))return"";var d="";if(c=c.firstChild)do d+=b(c);while(c=c.nextSibling);return d}},processMatches:function(){var a=this.matches,b=this.node,c=this.options.filterElements,d,e,f=[],g=b,h=a.shift(),i=0,j=0,k=0,l,m=[b];a:while(!0){if(3===g.nodeType&&(!e&&g.length+i>=h.endIndex?e={node:g,index:k++,text:g.data.substring(h.startIndex-i,h.endIndex-i),indexInMatch:i-h.startIndex,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,isEnd:!0}:d&&f.push({node:g,index:k++,text:g.data,indexInMatch:i-h.startIndex,indexInNode:0}),!d&&g.length+i>h.startIndex&&(d={node:g,index:k++,indexInMatch:0,indexInNode:h.startIndex-i,endIndexInNode:h.endIndex-i,text:g.data.substring(h.startIndex-i,h.endIndex-i)}),i+=g.data.length),l=1===g.nodeType&&c&&!c(g),d&&e){if(g=this.replaceMatch(h,d,f,e),i-=e.node.data.length-e.endIndexInNode,d=null,e=null,f=[],h=a.shift(),k=0,j++,!h)break}else if(!l&&(g.firstChild||g.nextSibling)){g.firstChild?(m.push(g),g=g.firstChild):g=g.nextSibling;continue}while(!0){if(g.nextSibling){g=g.nextSibling;break}if(g=m.pop(),g===b)break a}}},revert:function(){for(var a=this.reverts.length;a--;)this.reverts[a]();this.reverts=[]},prepareReplacementString:function(a,c,d,e){var f=this.options.portionMode;return f===b&&c.indexInMatch>0?"":(a=a.replace(/\$(\d+|&|`|')/g,function(a,b){var c;switch(b){case"&":c=d[0];break;case"`":c=d.input.substring(0,d.startIndex);break;case"'":c=d.input.substring(d.endIndex);break;default:c=d[+b]}return c}),f===b?a:c.isEnd?a.substring(c.indexInMatch):a.substring(c.indexInMatch,c.indexInMatch+c.text.length))},getPortionReplacementNode:function(a,b,c){var e=this.options.replace||"$&",f=this.options.wrap;if(f&&f.nodeType){var g=d.createElement("div");g.innerHTML=f.outerHTML||(new XMLSerializer).serializeToString(f),f=g.firstChild}if("function"==typeof e)return e=e(a,b,c),e&&e.nodeType?e:d.createTextNode(String(e));var h="string"==typeof f?d.createElement(f):f;return e=d.createTextNode(this.prepareReplacementString(e,a,b,c)),e.data&&h?(h.appendChild(e),h):e},replaceMatch:function(a,b,c,e){var f=b.node,g=e.node,h,i;if(f===g){var j=f;b.indexInNode>0&&(h=d.createTextNode(j.data.substring(0,b.indexInNode)),j.parentNode.insertBefore(h,j));var k=this.getPortionReplacementNode(e,a);return j.parentNode.insertBefore(k,j),e.endIndexInNode<j.length&&(i=d.createTextNode(j.data.substring(e.endIndexInNode)),j.parentNode.insertBefore(i,j)),j.parentNode.removeChild(j),this.reverts.push(function(){h===k.previousSibling&&h.parentNode.removeChild(h),i===k.nextSibling&&i.parentNode.removeChild(i),k.parentNode.replaceChild(j,k)}),k}h=d.createTextNode(f.data.substring(0,b.indexInNode)),i=d.createTextNode(g.data.substring(e.endIndexInNode));for(var l=this.getPortionReplacementNode(b,a),m=[],n=0,o=c.length;o>n;++n){var p=c[n],q=this.getPortionReplacementNode(p,a);p.node.parentNode.replaceChild(q,p.node),this.reverts.push(function(a,b){return function(){b.parentNode.replaceChild(a.node,b)}}(p,q)),m.push(q)}var r=this.getPortionReplacementNode(e,a);return f.parentNode.insertBefore(h,f),f.parentNode.insertBefore(l,f),f.parentNode.removeChild(f),g.parentNode.insertBefore(r,g),g.parentNode.insertBefore(i,g),g.parentNode.removeChild(g),this.reverts.push(function(){h.parentNode.removeChild(h),l.parentNode.replaceChild(f,l),i.parentNode.removeChild(i),r.parentNode.replaceChild(g,r)}),r}},h}(),G=function(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)};G.prototype={constructor:G,selector:"",finder:[],init:function(a,b,c,d,e){return this.selector=a,"string"==typeof b?this.filteredElemList=b:"function"==typeof b&&(this.filterElem=b),"string"==typeof c&&this[c]?this[c](d,e):this},filteredElemList:"style script",filterElem:function(a){var a=a.nodeName.toLowerCase(),b=this.filteredElemList.split(" "),c=!0;return b.forEach(function(b){return a===b?void(c=!1):void 0}),c},replace:function(a,b){var c=this;return this.finder.push(F(this.selector,{find:a,replace:b,filterElements:function(a){return c.filterElem(a)}})),this},wrap:function(a,b){var c=this;return c.finder.push(F(c.selector,{find:a,wrap:b,filterElements:function(a){return c.filterElem(a)}})),this},revert:function(a){var b=this.finder.length,a=Number(a)||0===a?Number(a):"all"===a?b:1;if("undefined"==typeof b||0===b)return this;a>this.finder.length&&(a=b);for(var c=parseInt(a);c>0;c--)this.finder.pop().revert();return this},jinzify:function(){var a=this.filteredElemList;return this.filteredElemList+=" jinze",this.replace(D.jinze.touwei,function(a,b){var d=b[0],e=c.createTextNode(d),f=E.create("jinze","touwei");return f.appendChild(e),0===a.index&&a.isEnd||1===a.index?f:""}).replace(D.jinze.wei,function(a,b){var d=b[0],e=c.createTextNode(d),f=E.create("jinze","wei");return f.appendChild(e),0===a.index?f:""}).replace(D.jinze.tou,function(a,b){var d=b[0],e=c.createTextNode(d),f=E.create("jinze","tou");return f.appendChild(e),0===a.index&&a.isEnd||1===a.index?f:""}).replace(D.jinze.middle,function(a,b){var d=b[0],e=c.createTextNode(d),f=E.create("jinze","middle");return f.appendChild(e),0===a.index&&a.isEnd||1===a.index?f:""}),this.filteredElemList=a,this},charify:function(a){var a=E.extend({hanzi:"individual",liga:"liga",word:"group",latin:"group",ellinika:"group",kirillica:"group"},a||{});return"group"===a.hanzi&&this.wrap(D.char.hanzi.group,E.clone(E.create("char_group","hanzi cjk"))),"individual"===a.hanzi&&this.wrap(D.char.hanzi.individual,E.clone(E.create("char","hanzi cjk"))),("individual"===a.hanzi||"biaodian"===a.hanzi||"liga"===a.liga)&&("none"!==a.hanzi&&this.replace(D.char.biaodian.all,function(a,b){var d=b[0],e=c.createTextNode(d),f="biaodian cjk "+(d.match(D.char.biaodian.open)?"open":d.match(D.char.biaodian.end)?"end":""),g=E.create("char",f),h=d.charCodeAt(0).toString(16);return g.setAttribute("unicode",h),g.appendChild(e),g}),this.replace("liga"===a.liga?D.char.biaodian.liga:new RegExp("("+h.biaodian.liga+")","g"),function(a,b){var d=b[0],e=c.createTextNode(d),f=E.create("char","biaodian liga cjk"),g=d.charCodeAt(0).toString(16);return f.setAttribute("unicode",g),f.appendChild(e),f})),"none"!==a.word&&this.wrap(D.char.word,E.clone(E.create("word"))),("none"!==a.latin||"none"!==a.ellinika||"none"!==a.kirillica)&&this.wrap(D.char.punct.all,E.clone(E.create("char","punct"))),"individual"===a.latin&&this.wrap(D.char.alphabet.latin,E.clone(E.create("char","alphabet latin"))),"individual"===a.ellinika&&this.wrap(D.char.alphabet.ellinika,E.clone(E.create("char","alphabet ellinika greek"))),"individual"===a.kirillica&&this.wrap(D.char.alphabet.kirillica,E.clone(E.create("char","alphabet kirillica cyrillic"))),this}},G.prototype.init.prototype=G.prototype;var H={};function I(a,b){var c=E.create("canvas"),d;return c.width="50",c.height="20",c.style.display="none",e.appendChild(c),d=c.getContext("2d"),d.textBaseline="top",d.font="15px "+b+", sans-serif",d.fillStyle="black",d.strokeStyle="black",d.fillText(a,0,0),[c,d]}function J(a,b,c){var a=a,b=b,c=c||"\u8fadQ",d;try{b=I(c,b||"sans-serif"),a=I(c,a);for(var e=1;20>=e;e++)for(var f=1;50>=f;f++){if("undefined"!==d&&a[1].getImageData(f,e,1,1).data[3]!==b[1].getImageData(f,e,1,1).data[3]){d=!0;break}if(d)break;50!==f||20!==e||d||(d=!1)}return b[0].parentNode.removeChild(b[0]),a[0].parentNode.removeChild(a[0]),b=null,a=null,d}catch(g){return!1}}var K="Webkit Moz ms".split(" "),L={},M=E.create("_");function N(a){var b=a.charAt(0).toUpperCase()+a.slice(1),c=(a+" "+K.join(b+" ")+b).split(" "),d;return c.forEach(function(a){"string"==typeof M.style[a]&&(d=!0)}),d||!1}function O(a,b){var c=e||E.create("body"),f=E.create("div"),g=e?f:c,b="function"==typeof b?b:function(){},h,i,j;return h=["<style>",a,"</style>"].join(""),g.innerHTML+=h,c.appendChild(f),e||(c.style.background="",c.style.overflow="hidden",j=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),i=b(g,a),g.parentNode.removeChild(g),e||(d.style.overflow=j),!!i}function P(b,d){var e;return a.getComputedStyle?e=c.defaultView.getComputedStyle(b,null).getPropertyValue(d):b.currentStyle&&(e=b.currentStyle[d]),e}L={ruby:function(){var a=E.create("ruby"),b=E.create("rt"),c=E.create("rp"),e;return a.appendChild(c),a.appendChild(b),d.appendChild(a),e="none"===P(c,"display")||"ruby"===P(a,"display")&&"ruby-text"===P(b,"display")?!0:!1,d.removeChild(a),a=null,b=null,c=null,e}(),fontface:function(){var a;return O('@font-face { font-family: font; src: url("http://"); }',function(b,c){var d=E.qsa("style",b)[0],e=d.sheet||d.styleSheet,f=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"";a=/src/i.test(f)&&0===f.indexOf(c.split(" ")[0])}),a}(),unicoderange:function(){var a;return O('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',function(){a=!J("test-for-unicode-range",'Arial, "Droid Sans"',"Q")}),a}(),columnwidth:function(){return N("columnWidth")}(),textemphasis:function(){return N("textEmphasis")}(),writingmode:function(){return N("writingMode")}()};var Q=h.zhuyin.initial,R=h.zhuyin.medial,S=h.zhuyin.final,T=h.zhuyin.tone+"|"+h.zhuyin.ruyun,U=new RegExp("^("+Q+")?("+R+")?("+S+")?("+T+")?$"),V=new RegExp("("+T+")","ig");function W(a,b){var a=E.clone(a),b=E.clone(b),c=E.create("rb");return c.appendChild(a),c.appendChild(b),E.setAttr(c,{annotation:b.textContent}),c}function X(a,b){var a=E.clone(a),c=E.create("rb"),d=E.create("zhuyin"),e=E.create("yin"),f=E.create("diao"),g=b.textContent,h,i,j,k;return h=g.replace(V,""),k=h?h.length:0,i=g.replace(h,"").replace(/[\u02C5]/g,"\u02c7").replace(/[\u030D]/g,"\u0358"),j=g.replace(U,function(a,b,c){return[a?"S":null,b?"J":null,c?"Y":null].join("")}),f.innerHTML=i,e.innerHTML=h,d.appendChild(e),d.appendChild(f),"RB"===a.nodeName?c.innerHTML=a.innerHTML:c.appendChild(a),c.appendChild(d),E.setAttr(c,{zhuyin:"",diao:i,length:k,form:j}),c}E.extend(H,{renderElem:function(a){this.renderRuby(a),this.renderLineDeco(a),this.renderLineDeco(a,"s, del"),this.renderEm(a)},renderLineDeco:function(a,b){var b=b||"u, ins",c=E.qsa(b,a),d=new RegExp("^("+b.replace(/\,\s?/g,"|")+")$","ig");c.forEach(function(a){var b;do if(b=(b||a).nextSibling,!b)return;while("WBR"===b.nodeName||8===b.nodeType);b.nodeName.match(d)&&b.classList.add("adjacent")})},renderEm:function(a,b){var c=b?"qsa":"tag",b=b||"em",d=E[c](b,a);d.forEach(function(a){var b=G(a);L.textemphasis||b.jinzify(),b.charify(L.textemphasis?{hanzi:"biaodian",word:"punctuation"}:{latin:"individual",ellinika:"individual",kirillica:"individual"})})},renderRuby:function(a,b){var c=b?"qsa":"tag",b=b||"ruby",d=E[c](b,a),e=b+", rtc",f=E.qsa(e,a);f.forEach(function(a){var b=a.classList;b.contains("pinyin")?b.add("romanization"):b.contains("mps")&&b.add("zhuyin"),b.contains("romanization")&&b.add("annotation")}),d.forEach(function(a){var c=a.classList,d=!L.ruby||c.contains("zhuyin")||c.contains("complex")||c.contains("rightangle"),e,f,g,h;d&&(e=E.create("!"),e.appendChild(E.clone(a)),f=E.qsa(b,e)[0],(!L.ruby||c.contains("zhuyin"))&&E.tag("rt",f).forEach(function(a){var b=E.create("!"),d=[],e;do{if(e=(e||a).previousSibling,!e||e.nodeName.match(/(rt|rb)/i))break;b.insertBefore(E.clone(e),b.firstChild),d.push(e)}while(!e.nodeName.match(/(rt|rb)/i));b=c.contains("zhuyin")?X(b,a):W(b,a);try{a.parentNode.replaceChild(b,a),d.forEach(function(a){E.remove(a)})}catch(f){}}),(c.contains("complex")||c.contains("rightangle"))&&(g=E.tag("rb",f),!function(b){b&&(E.tag("rt",b).forEach(function(a,b){var c=X(g[b],a);try{g[b].parentNode.replaceChild(c,g[b])}catch(d){}}),E.remove(b),a.setAttribute("rightangle",""))}(f.querySelector("rtc.zhuyin")),E.qsa("rtc:not(.zhuyin)",f).forEach(function(a,b){var c=a.classList,d,e;d=e=0,g=E.qsa(0===b?"rb":"rb[span]",f),E.tag("rt",a).forEach(function(a){var f=E.create("!"),h=parseInt(a.getAttribute("rbspan"))||1,i,j;if(d=e,e+=parseInt(h),b>0)for(var k=e-1;k>=d;k--)if(g[k]&&(i=parseInt(g[k].getAttribute("span"))||1,i>h)){j=E.tag("rb",g[k]);for(var l=0,m=j.length;m>l;l++)g.splice(k+l,1,j[l])}for(var k=e-1;k>=d;k--)g[k]&&(f.insertBefore(E.clone(g[k]),f.firstChild),h>1&&k!==d?E.remove(g[k]):(f=W(f,a),E.setAttr(f,{"class":c,span:h,order:b}),g[k].parentNode.replaceChild(f,g[k])))}),E.remove(a)})),h=E.create("hruby"),h.innerHTML=e.firstChild.innerHTML,E.setAttr(h,a.attributes),h.normalize(),a.parentNode.replaceChild(h,a))})}});function Y(a){var a=a||d,b="",c;a.classList.add("hyu-js-rendered");for(var e in L)c=(L[e]?"":"no-")+e,a.classList.add(c),b+=c+" ";return b}E.extend(H,{support:L,detectFont:J,initCond:Y});var Z={};Z.support={heiti:!0,songti:function(){return H.detectFont("Han Songti")}(),kaiti:function(){return H.detectFont("Han Kaiti")}(),fangsong:function(){return H.detectFont("Han Fangsong")}()};var $="* > hws:first-child, * > wbr:first-child + hws, wbr:first-child + wbr + hws",_=function(){var a=E.create("div");return a.appendChild(c.createTextNode("0-")),a.appendChild(c.createTextNode("2")),a.normalize(),2!==a.firstChild.length}();function ab(a,b){var a=a||c,d=b?"strict":"base",e,f;return e=E.create("hws"),e.innerHTML=" ",f=G(a),f.filteredElemList+=" textarea",f.replace(D.hws[d][0],"$1<hws/>$2").replace(D.hws[d][1],"$1<hws/>$2").replace(/(['"]+)[<hws\/>|\s]*(.+?)[<hws\/>|\s]*(['"]+)/gi,"$1$2$3").replace("<hws/>",function(){return E.clone(e)}),E.qsa($,a).forEach(function(a){var b=a.parentNode,c=b.firstChild;while("WBR"===c.nodeName||8===c.nodeType)if(c=c.nextSibling,!c)return;while("HWS"===c.nodeName)if(b.removeChild(c),c=b.parentNode.insertBefore(E.clone(e),b),b=b.parentNode,_&&b.normalize(),c!==b.firstChild)break}),_&&a.normalize(),f}function bb(a){var a=a||c,b,d;L.unicoderange||(b=G(a),b.filteredElemList+=" em",d=E.create("char","biaodian cjk middle"),d.setAttribute("unicode","b7"),b.wrap(/\u00B7/g,E.clone(d)).charify({liga:"liga",hanzi:"none",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))}return E.extend(g,{renderHWS:ab,renderBasicBd:bb}),E.extend(g,{UNICODE:h,TYPESET:D}),E.extend(g.UNICODE,{greek:g.UNICODE.ellinika,cyrillic:g.UNICODE.kirillica}),Object.freeze(g.UNICODE),Object.freeze(g.TYPESET),g.init=function(){return g().renderByRoutine()},g.Farr=G,["replace","wrap","revert","jinzify","charify"].forEach(function(a){g.fn[a]=function(){return this.Farr||(this.Farr=g.Farr(this.context)),this.Farr[a](arguments[0],arguments[1]),this}}),g.normalize=H,g.support=H.support,g.detectFont=H.detectFont,E.extend(g.fn,{initCond:function(){return this.condition.classList.add("han-js-rendered"),g.normalize.initCond(this.condition),this}}),["Elem","LineDeco","Em","Ruby"].forEach(function(a){var b="render"+a;g.fn[b]=function(a){return g.normalize[b](this.context,a),this}}),g.typeface=Z,E.extend(g.support,Z.support),["HWS","BasicBd"].forEach(function(a){var b="render"+a;g.fn[b]=function(){return E.makeArray(arguments).unshift(this.context),g[b].apply(null,arguments),this}}),!function(){var a,b;a=setInterval(function(){"complete"===c.readyState&&(clearTimeout(a),d.classList.contains("han-init")?g.init():(b=c.querySelector(".han-init-context"))&&g(b).renderByRoutine())},10)}(),("undefined"==typeof b||b===!1&&"function"!=typeof define&&!define.amd)&&(a.Han=g),g});