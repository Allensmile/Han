/*! 漢字標準格式 v3.1.0 | MIT License | css.hanzi.co */
/*! Han.css: the CSS typography framework optimised for Hanzi */

void function(e,n){"object"==typeof module&&"object"==typeof module.exports?module.exports=n(e,!0):n(e)}("undefined"!=typeof window?window:this,function(e,n){"use strict";function t(e,n){var t,i=g.create("canvas");return i.width="50",i.height="20",i.style.display="none",l.appendChild(i),t=i.getContext("2d"),t.textBaseline="top",t.font="15px "+n+", sans-serif",t.fillStyle="black",t.strokeStyle="black",t.fillText(e,0,0),[i,t]}function i(e,n,i){var r,e=e,n=n,i=i||"辭Q";try{n=t(i,n||"sans-serif"),e=t(i,e);for(var a=1;20>=a;a++)for(var o=1;50>=o;o++){if("undefined"!==r&&e[1].getImageData(o,a,1,1).data[3]!==n[1].getImageData(o,a,1,1).data[3]){r=!0;break}if(r)break;50!==o||20!==a||r||(r=!1)}return g.remove(n[0]),g.remove(e[0]),n=null,e=null,r}catch(c){return!1}}function r(e,n,t){var i=g.create("ru"),n=g.clone(n),t=t||{};return Array.isArray(e)?i.innerHTML=e.map(function(e){return e.outerHTML}).join(""):i.appendChild(g.clone(e)),i.appendChild(n),t.annotation=n.textContent,g.setAttr(i,t),i}function a(e,n){var t,i,r,a,e=g.clone(e),o=g.create("ru"),c=g.create("zhuyin"),l=g.create("yin"),d=g.create("diao"),s=n.textContent;return t=s.replace(f.zhuyin.diao,""),a=t?t.length:0,i=s.replace(t,"").replace(/[\u02C5]/g,"ˇ").replace(/[\u030D]/g,"͘"),r=s.replace(f.zhuyin.form,function(e,n,t){return[e?"S":null,n?"J":null,t?"Y":null].join("")}),d.innerHTML=i,l.innerHTML=t,c.appendChild(l),c.appendChild(d),o.appendChild(e),o.appendChild(c),g.setAttr(o,{zhuyin:"",diao:i,length:a,form:r}),o}var o=e.document,c=o.documentElement,l=o.body,d="3.1.0",s=["initCond","renderElem","renderJiya","renderHWS","correctBasicBD","substCombLigaWithPUA"],u=function(e,n){return new u.fn.init(e,n)},h=function(){return arguments[0]&&(this.context=arguments[0]),arguments[1]&&(this.condition=arguments[1]),this};u.version=d,u.fn=u.prototype={version:d,constructor:u,context:l,condition:c,routine:s,init:h,setRoutine:function(e){return Array.isArray(e)&&(this.routine=e),this},render:function(e){var n=this,e=Array.isArray(e)?e:this.routine;return e.forEach(function(e){try{"string"==typeof e?n[e]():Array.isArray(e)&&n[e.shift()].apply(n,e)}catch(t){}}),this}},u.fn.init.prototype=u.fn,u.init=function(){return u.init=u().render()};var p={punct:{base:"[…,.;:!?‽_]",sing:"[‐-—…]",middle:"[\\/~\\-&‐-—_]",open:"['\"‘“\\(\\[¡¿⸘«‹‚“„]",close:"['\"”’\\)\\]»›‛”‟]",end:"['\"”’\\)\\]»›‛”‟‼‽⁇-⁉,.;:!?]"},biaodian:{base:"[︰．、，。：；？！ー]",liga:"[—…⋯]",middle:"[·＼／－゠＆・＿]",open:"[「『《〈（〔［｛【〖]",close:"[」』》〉）〕］｝】〗]",end:"[」』》〉）〕］｝】〗︰．、，。：；？！ー]"},hanzi:{base:"[一-鿿㐀-䶵㇀-㇣〇﨎﨏﨑﨓﨔﨟﨡﨣﨤﨧-﨩]|[�-�][�-�]",desc:"[⿰-⿺]",radical:"[⼀-⿕⺀-⻳]"},latin:{base:"[A-Za-z0-9À-ÿĀ-ſƀ-ɏⱠ-Ɀ꜠-ꟿḀ-ỿ]",combine:"[̀-́᷀-᷿]"},ellinika:{base:"[0-9Ͱ-Ͽἀ-῿]",combine:"[̀-᷀ͅ-᷿]"},kirillica:{base:"[0-9Ѐ-҂Ҋ-ӿԀ-ԯꙀ-ꙮ꙾-ꚗ]",combine:"[҃-҉ⷠ-ⷿ꙯-꙽ꚟ]"},kana:{base:"[アイウエオ-ヺあいうえお-ゔゟヿ]|�[�-�]",small:"[ぁぃぅぇぉァィゥェォっゃゅょゎゕゖッャュョヮヵヶㇰ-ㇿ]",combine:"[゙-゜]",half:"[ｦ-ﾟ]",mark:"[゠ゝゞ・-ヾ]"},eonmun:{base:"[가-힣]",letter:"[ᄀ-ᇿㅏ-ㅣㄱ-ㆎꥠ-ꥼힰ-ퟻ]",half:"[ﾡ-ￜ]"},zhuyin:{base:"[ㄅ-ㄭㆠ-ㆺ]",initial:"[ㄅ-ㄙㄪ-ㄬㆠ-ㆣ]",medial:"[ㄧ-ㄩ]","final":"[ㄚ-ㄩㄭㆤ-ㆳㆸ-ㆺ]",tone:"[˙ˊ˅ˇˋ˪˫]",ruyun:"[ㆴ-ㆷ][̍͘]?"}},f=function(){var e="[\\x20\\t\\r\\n\\f]",n=p.punct.open,t=(p.punct.close,p.punct.end),i=p.punct.middle,r=p.punct.sing,a=n+"|"+t+"|"+i,o=p.biaodian.open,c=p.biaodian.close,l=p.biaodian.end,d=p.biaodian.middle,s=p.biaodian.liga+"{2}",u=o+"|"+l+"|"+d,h=p.kana.base+p.kana.combine+"?",f=p.kana.small+p.kana.combine+"?",g=(p.kana.half,p.eonmun.base+"|"+p.eonmun.letter),m=p.eonmun.half,b=p.hanzi.base+"|"+p.hanzi.desc+"|"+p.hanzi.radical+"|"+h,y=p.ellinika.combine,x=p.latin.base+y+"*",v=p.ellinika.base+y+"*",E=p.kirillica.combine,w=p.kirillica.base+E+"*",C=x+"|"+v+"|"+w,N="['’]",S=b+"|("+C+"|"+N+")+",k=p.zhuyin.initial,z=p.zhuyin.medial,I=p.zhuyin.final,T=p.zhuyin.tone+"|"+p.zhuyin.ruyun;return{"char":{punct:{all:new RegExp("("+a+")","g"),open:new RegExp("("+n+")","g"),end:new RegExp("("+t+")","g"),sing:new RegExp("("+r+")","g")},biaodian:{all:new RegExp("("+u+")","g"),open:new RegExp("("+o+")","g"),close:new RegExp("("+c+")","g"),end:new RegExp("("+l+")","g"),liga:new RegExp("("+s+")","g"),group:[new RegExp("("+o+"|"+d+"|"+l+"){2,}","g"),new RegExp("("+s+o+")","g")]},hanzi:{individual:new RegExp("("+b+")","g"),group:new RegExp("("+b+")+","g")},word:new RegExp("("+x+"|"+v+"|"+w+"|"+a+")+","ig"),alphabet:{latin:new RegExp("("+x+")","ig"),ellinika:new RegExp("("+v+")","ig"),kirillica:new RegExp("("+w+")","ig"),kana:new RegExp("("+h+")","g"),smallkana:new RegExp("("+f+")","g"),eonmun:new RegExp("("+g+")","g"),halfeonmun:new RegExp("("+m+")","g")}},jinze:{touwei:new RegExp("("+o+"+)("+S+")("+l+"+)","ig"),tou:new RegExp("("+o+"+)("+S+")","ig"),wei:new RegExp("("+S+")("+l+"+)","ig"),middle:new RegExp("("+S+")("+d+")("+S+")","ig")},zhuyin:{form:new RegExp("^˙?("+k+")?("+z+")?("+I+")?("+T+")?$"),diao:new RegExp("("+T+")","g")},hws:{base:[new RegExp("("+b+")("+C+"|"+n+")","ig"),new RegExp("("+C+"|"+t+")("+b+")","ig")],strict:[new RegExp("("+b+")"+e+"?("+C+"|"+n+")","ig"),new RegExp("("+C+"|"+t+")"+e+"?("+b+")","ig")]},"display-as":{"ja-font-for-hant":["查 査","啟 啓","鄉 鄕","值 値","污 汚"],"comb-liga-pua":[["a[̍͘]","󰁡"],["e[̍͘]","󰁥"],["i[̍͘]","󰁩"],["o[̍͘]","󰁯"],["u[̍͘]","󰁵"],["ㆴ[̍͘]","󳆴"],["ㆵ[̍͘]","󳆵"],["ㆶ[̍͘]","󳆶"],["ㆷ[̍͘]","󳆷"]]},"inaccurate-char":[["[•‧]","·"],["⋯⋯","……"],["──","——"],["‵","‘"],["′","’"],["‶","“"],["″","”"]]}}();u.UNICODE=p,u.TYPESET=f,u.UNICODE.cjk=u.UNICODE.hanzi,u.UNICODE.greek=u.UNICODE.ellinika,u.UNICODE.cyrillic=u.UNICODE.kirillica,u.UNICODE.hangul=u.UNICODE.eonmun,u.TYPESET.char.cjk=u.TYPESET.char.hanzi,u.TYPESET.char.alphabet.greek=u.TYPESET.char.alphabet.ellinika,u.TYPESET.char.alphabet.cyrillic=u.TYPESET.char.alphabet.kirillica,u.TYPESET.char.alphabet.hangul=u.TYPESET.char.alphabet.eonmun;var g={id:function(e,n){return(n||o).getElementById(e)},tag:function(e,n){return this.makeArray((n||o).getElementsByTagName(e))},qsa:function(e,n){return this.makeArray((n||o).querySelectorAll(e))},matches:function(e,n){var t=Element.prototype,i=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.webkitMatchesSelector;try{return i.call(e,n)}catch(r){return!1}},create:function(e,n){var e="!"===e?o.createDocumentFragment():""===e?o.createTextNode(n||""):o.createElement(e);try{n&&(e.className=n)}catch(t){}return e},clone:function(e,n){return e.cloneNode(n||!0)},remove:function(e,n){return(n||e.parentNode).removeChild(e)},setAttr:function(e,n){var t=n.length;if("object"==typeof n){if("object"==typeof n[0]&&"name"in n[0])for(var i=0;t>i;i++)void 0!==n[i].value&&e.setAttribute(n[i].name,n[i].value);else for(var r in n)n.hasOwnProperty(r)&&void 0!==n[r]&&e.setAttribute(r,n[r]);return e}},isIgnorable:function(e){return"WBR"===e.nodeName||e.nodeType===Node.COMMENT_NODE},makeArray:function(e){return Array.prototype.slice.call(e)},extend:function(e,n){var t="object"==typeof e||"function"==typeof e||"object"==typeof n;if(t){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}}},m=function(){function e(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function n(){return t.apply(null,arguments)||i.apply(null,arguments)}function t(e,t,r,a,o){if(t&&!t.nodeType&&arguments.length<=2)return!1;var c="function"==typeof r;c&&(r=function(e){return function(n,t){return e(n.text,t.startIndex)}}(r));var l=i(t,{find:e,wrap:c?null:r,replace:c?r:"$"+(a||"&"),prepMatch:function(e,n){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(a>0){var t=e[a];e.index+=e[0].indexOf(t),e[0]=t}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=n,e},filterElements:o});return n.revert=function(){return l.revert()},!0}function i(e,n){return new r(e,n)}function r(e,n){n.portionMode=n.portionMode||a,this.node=e,this.options=n,this.prepMatch=n.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}{var a="retain",c="first",l=o;({}).toString}return n.Finder=r,r.prototype={search:function(){var n,t=0,i=this.options.find,r=this.getAggregateText(),a=[];if(i="string"==typeof i?RegExp(e(i),"g"):i,i.global)for(;n=i.exec(r);)a.push(this.prepMatch(n,t++));else(n=r.match(i))&&a.push(this.prepMatch(n,0));return a},prepMatch:function(e,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=n,e},getAggregateText:function(){function e(t){if(3===t.nodeType)return t.data;if(n&&!n(t))return"";var i="";if(t=t.firstChild)do i+=e(t);while(t=t.nextSibling);return i}var n=this.options.filterElements;return e(this.node)},processMatches:function(){var e,n,t,i=this.matches,r=this.node,a=this.options.filterElements,o=[],c=r,l=i.shift(),d=0,s=0,u=0,h=[r];e:for(;;){if(3===c.nodeType&&(!n&&c.length+d>=l.endIndex?n={node:c,index:u++,text:c.data.substring(l.startIndex-d,l.endIndex-d),indexInMatch:d-l.startIndex,indexInNode:l.startIndex-d,endIndexInNode:l.endIndex-d,isEnd:!0}:e&&o.push({node:c,index:u++,text:c.data,indexInMatch:d-l.startIndex,indexInNode:0}),!e&&c.length+d>l.startIndex&&(e={node:c,index:u++,indexInMatch:0,indexInNode:l.startIndex-d,endIndexInNode:l.endIndex-d,text:c.data.substring(l.startIndex-d,l.endIndex-d)}),d+=c.data.length),t=1===c.nodeType&&a&&!a(c),e&&n){if(c=this.replaceMatch(l,e,o,n),d-=n.node.data.length-n.endIndexInNode,e=null,n=null,o=[],l=i.shift(),u=0,s++,!l)break}else if(!t&&(c.firstChild||c.nextSibling)){c.firstChild?(h.push(c),c=c.firstChild):c=c.nextSibling;continue}for(;;){if(c.nextSibling){c=c.nextSibling;break}if(c=h.pop(),c===r)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,n,t){var i=this.options.portionMode;return i===c&&n.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,n){var i;switch(n){case"&":i=t[0];break;case"`":i=t.input.substring(0,t.startIndex);break;case"'":i=t.input.substring(t.endIndex);break;default:i=t[+n]}return i}),i===c?e:n.isEnd?e.substring(n.indexInMatch):e.substring(n.indexInMatch,n.indexInMatch+n.text.length))},getPortionReplacementNode:function(e,n,t){var i=this.options.replace||"$&",r=this.options.wrap;if(r&&r.nodeType){var a=l.createElement("div");a.innerHTML=r.outerHTML||(new XMLSerializer).serializeToString(r),r=a.firstChild}if("function"==typeof i)return i=i(e,n,t),i&&i.nodeType?i:l.createTextNode(String(i));var o="string"==typeof r?l.createElement(r):r;return i=l.createTextNode(this.prepareReplacementString(i,e,n,t)),i.data&&o?(o.appendChild(i),o):i},replaceMatch:function(e,n,t,i){var r,a,o=n.node,c=i.node;if(o===c){var d=o;n.indexInNode>0&&(r=l.createTextNode(d.data.substring(0,n.indexInNode)),d.parentNode.insertBefore(r,d));var s=this.getPortionReplacementNode(i,e);return d.parentNode.insertBefore(s,d),i.endIndexInNode<d.length&&(a=l.createTextNode(d.data.substring(i.endIndexInNode)),d.parentNode.insertBefore(a,d)),d.parentNode.removeChild(d),this.reverts.push(function(){r===s.previousSibling&&r.parentNode.removeChild(r),a===s.nextSibling&&a.parentNode.removeChild(a),s.parentNode.replaceChild(d,s)}),s}r=l.createTextNode(o.data.substring(0,n.indexInNode)),a=l.createTextNode(c.data.substring(i.endIndexInNode));for(var u=this.getPortionReplacementNode(n,e),h=[],p=0,f=t.length;f>p;++p){var g=t[p],m=this.getPortionReplacementNode(g,e);g.node.parentNode.replaceChild(m,g.node),this.reverts.push(function(e,n){return function(){n.parentNode.replaceChild(e.node,n)}}(g,m)),h.push(m)}var b=this.getPortionReplacementNode(i,e);return o.parentNode.insertBefore(r,o),o.parentNode.insertBefore(u,o),o.parentNode.removeChild(o),c.parentNode.insertBefore(b,c),c.parentNode.insertBefore(a,c),c.parentNode.removeChild(c),this.reverts.push(function(){r.parentNode.removeChild(r),u.parentNode.replaceChild(o,u),a.parentNode.removeChild(a),b.parentNode.replaceChild(c,b)}),b}},n}(),b="style, script",y=function(e,n,t,i,r){return new y.prototype.init(e,n,t,i,r)};y.prototype={constructor:y,context:"",finder:[],init:function(e,n,t,i,r){return this.context=e,this.filterOut(n),"string"==typeof t&&this[t]?this[t](i,r):this},filterOutSelector:b,filterOutFn:function(e){return g.matches(e,this.filterOutSelector)?!1:!0},filterOut:function(e){return"string"==typeof e?this.filterOutSelector=e:"function"==typeof e&&(this.filterOutFn=e),this},replace:function(e,n){var t=this;return this.finder.push(m(this.context,{find:e,replace:n,filterElements:function(e){return t.filterOutFn(e)}})),this},wrap:function(e,n){var t=this;return t.finder.push(m(t.context,{find:e,wrap:n,filterElements:function(e){return t.filterOutFn(e)}})),this},revert:function(e){var n=this.finder.length,e=Number(e)||0===e?Number(e):"all"===e?n:1;if("undefined"==typeof n||0===n)return this;e>this.finder.length&&(e=n);for(var t=parseInt(e);t>0;t--)this.finder.pop().revert();return this},jinzify:function(){var e=this.filterOutSelector;return this.filterOutSelector+=", jinze",this.replace(f.jinze.touwei,function(e,n){var t=n[0],i=g.create("",t),r=g.create("jinze","touwei");return r.appendChild(i),0===e.index&&e.isEnd||1===e.index?r:""}).replace(f.jinze.wei,function(e,n){var t=n[0],i=g.create("",t),r=g.create("jinze","wei");return r.appendChild(i),0===e.index?r:""}).replace(f.jinze.tou,function(e,n){var t=n[0],i=g.create("",t),r=g.create("jinze","tou");return r.appendChild(i),0===e.index&&e.isEnd||1===e.index?r:""}).replace(f.jinze.middle,function(e,n){var t=n[0],i=g.create("",t),r=g.create("jinze","middle");return r.appendChild(i),0===e.index&&e.isEnd||1===e.index?r:""}),this.filterOutSelector=e,this},groupify:function(){return this.wrap(f.char.biaodian.group[0],g.clone(g.create("char_group","biaodian cjk"))).wrap(f.char.biaodian.group[1],g.clone(g.create("char_group","biaodian cjk"))),this},charify:function(e){var e=g.extend({hanzi:"individual",liga:"liga",word:"group",latin:"group",ellinika:"group",kirillica:"group",kana:"none",eonmun:"none"},e||{});return"group"===e.hanzi&&this.wrap(f.char.hanzi.group,g.clone(g.create("char_group","hanzi cjk"))),"individual"===e.hanzi&&this.wrap(f.char.hanzi.individual,g.clone(g.create("char","hanzi cjk"))),("individual"===e.hanzi||"biaodian"===e.hanzi||"liga"===e.liga)&&("none"!==e.hanzi&&this.replace(f.char.biaodian.all,function(e,n){var t=n[0],i=g.create("",t),r="biaodian cjk "+(t.match(f.char.biaodian.open)?"open":t.match(f.char.biaodian.close)?"close end":t.match(f.char.biaodian.end)?"end":""),a=g.create("char",r),o=t.charCodeAt(0).toString(16);return a.setAttribute("unicode",o),a.appendChild(i),a}),this.replace("liga"===e.liga?f.char.biaodian.liga:new RegExp("("+p.biaodian.liga+")","g"),function(e,n){var t=n[0],i=g.create("",t),r=g.create("char","biaodian liga cjk"),a=t.charCodeAt(0).toString(16);return r.setAttribute("unicode",a),r.appendChild(i),r})),"none"!==e.word&&this.wrap(f.char.word,g.clone(g.create("word"))),("none"!==e.latin||"none"!==e.ellinika||"none"!==e.kirillica)&&this.wrap(f.char.punct.all,g.clone(g.create("char","punct"))),"individual"===e.latin&&this.wrap(f.char.alphabet.latin,g.clone(g.create("char","alphabet latin"))),"individual"===e.ellinika&&this.wrap(f.char.alphabet.ellinika,g.clone(g.create("char","alphabet ellinika greek"))),"individual"===e.kirillica&&this.wrap(f.char.alphabet.kirillica,g.clone(g.create("char","alphabet kirillica cyrillic"))),this}},y.prototype.init.prototype=y.prototype,u.find=y,void["replace","wrap","revert","jinzify","charify"].forEach(function(e){u.fn[e]=function(){return this.finder||(this.finder=u.find(this.context)),this.finder[e](arguments[0],arguments[1]),this}});var x={JS_RENDERED_CLASS:"hyu-js-rendered"};x.detectFont=i,x.support=function(){function n(e){var n,t=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+r.join(t+" ")+t).split(" ");return i.forEach(function(e){"string"==typeof a.style[e]&&(n=!0)}),n||!1}function t(e,n){var t,i,r,a=l||g.create("body"),o=g.create("div"),d=l?o:a,n="function"==typeof n?n:function(){};return t=["<style>",e,"</style>"].join(""),d.innerHTML+=t,a.appendChild(o),l||(a.style.background="",a.style.overflow="hidden",r=c.style.overflow,c.style.overflow="hidden",c.appendChild(a)),i=n(d,e),g.remove(d),l||(c.style.overflow=r),!!i}function i(n,t){var i;return e.getComputedStyle?i=o.defaultView.getComputedStyle(n,null).getPropertyValue(t):n.currentStyle&&(i=n.currentStyle[t]),i}var r="Webkit Moz ms".split(" "),a=g.create("_");return{ruby:function(){var e,n=g.create("ruby"),t=g.create("rt"),r=g.create("rp");return n.appendChild(r),n.appendChild(t),c.appendChild(n),e="none"===i(r,"display")||"ruby"===i(n,"display")&&"ruby-text"===i(t,"display")?!0:!1,c.removeChild(n),n=null,t=null,r=null,e}(),fontface:function(){var e;return t('@font-face { font-family: font; src: url("//"); }',function(n,t){var i=g.qsa("style",n)[0],r=i.sheet||i.styleSheet,a=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(t.split(" ")[0])}),e}(),unicoderange:function(){var e;return t('@font-face{font-family:test-for-unicode-range;src:local(Arial),local("Droid Sans")}@font-face{font-family:test-for-unicode-range;src:local("Times New Roman"),local(Times),local("Droid Serif");unicode-range:U+270C}',function(){e=!x.detectFont("test-for-unicode-range",'Arial, "Droid Sans"',"Q")}),e}(),columnwidth:n("columnWidth"),textemphasis:n("textEmphasis"),writingmode:n("writingMode")}}(),x.initCond=function(e){var n,e=e||c,t="";e.classList.add(x.JS_RENDERED_CLASS);for(var i in x.support)n=(x.support[i]?"":"no-")+i,e.classList.add(n),t+=n+" ";return t},g.extend(x,{renderElem:function(e){this.renderRuby(e),this.renderDecoLine(e),this.renderDecoLine(e,"s, del"),this.renderEm(e)},renderDecoLine:function(e,n){var n=n||"u, ins",t=g.qsa(n,e),i=new RegExp("^("+n.replace(/\,\s?/g,"|")+")$","ig");t.forEach(function(e){var n;do if(n=(n||e).nextSibling,!n)return;while(g.isIgnorable(n));n.nodeName.match(i)&&n.classList.add("adjacent")})},renderEm:function(e,n){var t=n?"qsa":"tag",n=n||"em",i=g[t](n,e);i.forEach(function(e){var n=y(e);x.support.textemphasis||n.jinzify(),n.groupify().charify(x.support.textemphasis?{hanzi:"biaodian",word:"punctuation"}:{latin:"individual",ellinika:"individual",kirillica:"individual"})})},renderRuby:function(e,n){var t=n?"qsa":"tag",n=n||"ruby",i=g[t](n,e),o=g.qsa(n+", rtc",e);o.forEach(function(e){var n=e.classList;n.contains("pinyin")?n.add("romanization"):n.contains("mps")&&n.add("zhuyin"),n.contains("romanization")&&n.add("annotation")}),i.forEach(function(e){var t,i,o,c,l,d,s=e.classList,u=!x.support.ruby||s.contains("zhuyin")||s.contains("complex")||s.contains("rightangle");u&&(t=g.create("!"),t.appendChild(g.clone(e)),i=g.qsa(n,t)[0],(!x.support.ruby||s.contains("zhuyin"))&&g.tag("rt",i).forEach(function(e){var n,t=g.create("!"),i=[];do{if(n=(n||e).previousSibling,!n||n.nodeName.match(/(r[ubt])/i))break;t.insertBefore(g.clone(n),t.firstChild),i.push(n)}while(!n.nodeName.match(/(r[ubt])/i));c=s.contains("zhuyin")?a(t,e):r(t,e);try{e.parentNode.replaceChild(c,e),i.forEach(function(e){g.remove(e)})}catch(o){}}),(s.contains("complex")||s.contains("rightangle"))&&(o=c=g.tag("rb",i),l=o.length,!function(n){n&&(c=g.tag("rt",n).map(function(e,n){if(o[n]){var t=a(o[n],e);try{o[n].parentNode.replaceChild(t,o[n])}catch(i){}return t}}),g.remove(n),e.setAttribute("rightangle",""))}(i.querySelector("rtc.zhuyin")),g.qsa("rtc:not(.zhuyin)",i).forEach(function(n,t){var i;i=g.tag("rt",n).map(function(n){var i,a,o=Number(n.getAttribute("rbspan")||1),d=0,u=[];o>l&&(o=l);do{try{i=c.shift(),u.push(i)}catch(h){}d+=Number(i.getAttribute("span")||1)}while(o>d);if(d>o){if(u.length>1)return void console.error("An impossible `rbspan` value detected.",e);u=g.tag("rb",u[0]),c=u.slice(o).concat(c),u=u.slice(0,o),d=o}a=r(u,n,{"class":s,span:d,order:t});try{u[0].parentNode.replaceChild(a,u.shift()),u.forEach(function(e){g.remove(e)})}catch(h){}return a}),c=i,g.remove(n)})),d=g.create("hruby"),d.innerHTML=t.firstChild.innerHTML,g.setAttr(d,e.attributes),d.normalize(),e.parentNode.replaceChild(d,e))})}}),u.normalize=x,u.support=x.support,u.detectFont=x.detectFont,u.fn.initCond=function(){return this.condition.classList.add("han-js-rendered"),u.normalize.initCond(this.condition),this},void["Elem","DecoLine","Em","Ruby"].forEach(function(e){var n="render"+e;u.fn[n]=function(e){return u.normalize[n](this.context,e),this}}),g.extend(u.support,{heiti:!0,songti:u.detectFont('"Han Songti"'),"songti-gb":u.detectFont('"Han Songti GB"'),kaiti:u.detectFont('"Han Kaiti"'),fangsong:u.detectFont('"Han Fangsong"')});var v,E="* > hws:first-child, * > wbr:first-child + hws, wbr:first-child + wbr + hws",w=function(){var e=g.create("div");return e.appendChild(g.create("","0-")),e.appendChild(g.create("","2")),e.normalize(),2!==e.firstChild.length}();v=g.create("hws"),v.innerHTML=" ",g.extend(u,{isNodeNormalizeNormal:w,renderHWS:function(e,n){var e=e||o,t=n?"strict":"base",i=u.find(e);return i.filterOutSelector+=n?", textarea, code, kbd, samp, pre":", textarea",i.replace(u.TYPESET.hws[t][0],"$1<hws/>$2").replace(u.TYPESET.hws[t][1],"$1<hws/>$2").replace(/(['"]+)<hws\/>(.+?)<hws\/>\1/gi,"$1$2$1").replace("<hws/>",function(){return g.clone(v)}),g.qsa(E,e).forEach(function(e){for(var n=e.parentNode,t=n.firstChild;g.isIgnorable(t);)if(t=t.nextSibling,!t)return;for(;"HWS"===t.nodeName&&(g.remove(t,n),t=n.parentNode.insertBefore(g.clone(v),n),n=n.parentNode,w&&n.normalize(),t===n.firstChild););}),w&&e.normalize(),i}}),g.extend(u.fn,{HWS:null,renderHWS:function(e){return u.renderHWS(this.context,e),this.HWS=g.tag("hws",this.context),this},revertHWS:function(){return this.HWS.forEach(function(e){g.remove(e)}),this}}),u.renderJiya=function(e){var e=e||o,n=[u.find(e)];return n[0].filterOutSelector+=", textarea, code, kbd, samp, pre, jinze, em",n[0].groupify(),g.qsa("char_group.biaodian",e).forEach(function(e){n.push(u(e).charify({hanzi:"biaodian",liga:"liga",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))}),n},g.extend(u.fn,{jiya:null,renderJiya:function(){return this.jiya=u.renderJiya(this.context),this},revertJiya:function(){try{this.jiya.revert("all")}catch(e){}return this}});var C;C=g.create("char","biaodian cjk middle"),C.setAttribute("unicode","b7"),u.correctBasicBD=function(e,n){var t,e=e||o;(!u.support.unicoderange||n)&&(t=u.find(e),t.filteredElemList+=" em",t.wrap(/\u00B7/g,g.clone(C)).charify({liga:"liga",hanzi:"none",word:"none",latin:"none",ellinika:"none",kirillica:"none"}))},g.extend(u.fn,{basicBD:null,correctBasicBD:function(e){return this.basicBD=u.correctBasicBD(this.context,e),this},revertBasicBD:function(){try{this.basicBD.revert("all")}catch(e){}return this}});var N="ru[annotation]",S=" textarea code kbd samp pre",k=function(){var e,n,t,i=l||g.create("body"),r=g.create("div"),a=g.create("span"),o=l?r:i;return l?l.appendChild(o):(i.style.background="",i.style.overflow="hidden",n=c.style.overflow,c.style.overflow="hidden",c.appendChild(i)),a.innerHTML="&#x0069;&#x030D;",a.style.fontFamily="sans-serif",a.style.display="inline-block",e=g.clone(a),e.style.fontFamily='"Romanization Sans"',o.appendChild(a),o.appendChild(e),t=a.clientWidth!==e.clientWidth,g.remove(o),l||(c.style.overflow=n),t}(),z=u.TYPESET["display-as"]["comb-liga-pua"],I=u.TYPESET["inaccurate-char"],T=g.create("char","comb-liga"),R=g.create("inner");g.extend(u,{isCombLigaNormal:k,substCombLigaWithPUA:function(e){var e=e||o,n=u.find(e);if(!k)return n.filteredElemList+=S,z.forEach(function(e){n.replace(new RegExp(e[0],"ig"),function(n,t){var i=g.clone(T),r=g.clone(R);return r.innerHTML=t[0],i.appendChild(r),i.setAttribute("display-as",e[1]),0===n.index?i:""})}),g.qsa(N,e).forEach(function(e){var n=e.getAttribute("annotation");z.slice(0,5).forEach(function(e){n=n.replace(new RegExp(e[0],"ig"),e[1])}),e.setAttribute("annotation",n)}),n},substInaccurateChar:function(e){var e=e||o,n=u.find(e);n.filteredElemList+=S,I.forEach(function(e){n.replace(new RegExp(e[0],"ig"),e[1])})}}),g.extend(u.fn,{"comb-liga":null,"inaccurate-char":null,substCombLigaWithPUA:function(){return this["comb-liga"]=u.substCombLigaWithPUA(this.context),this},revertCombLigaWithPUA:function(){try{this["comb-liga"].revert("all")}catch(e){}return this},substInaccurateChar:function(){return this["inaccurate-char"]=u.substInaccurateChar(this.context),this},revertInaccurateChar:function(){try{this["inaccurate-char"].revert("all")}catch(e){}return this}}),e.addEventListener("DOMContentLoaded",function(){var e;c.classList.contains("han-init")?u.init():(e=o.querySelector(".han-init-context"))&&(u.init=u(e).render())}),"function"==typeof define&&define.amd?define(function(){return u}):("undefined"==typeof n||n===!1)&&(e.Han=u)});